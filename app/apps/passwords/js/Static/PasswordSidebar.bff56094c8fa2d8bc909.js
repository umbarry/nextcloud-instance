(self.webpackChunkncpasswords=self.webpackChunkncpasswords||[]).push([[9396],{84088:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>a});const a={}},90289:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>a});const a={}},58594:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>a});const a={}},62745:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>a});const a={}},57650:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>a});const a={}},87017:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>a});const a={}},37784:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>a});const a={}},92770:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>a});const a={}},20996:(t,e,s)=>{"use strict";s.d(e,{A:()=>n});var a=function(){var t=this;return(0,t._self._c)(t.tag,{ref:"field",tag:"component",attrs:{type:t.type,value:t.userInput,placeholder:t.getPlaceholder,title:t.getTitle},on:{input:function(e){return t.inputEvent()},keyup:function(e){return t.fireEvent(e)},keydown:function(e){return t.fireEvent(e)},keypress:function(e){return t.fireEvent(e)}}})};a._withStripped=!0;var i=s(80444);const r={props:{variables:{type:Object,default:()=>({})},title:{type:String,default:null},value:{type:String,default:""},placeholder:{type:String,default:null},type:{type:String,default:"text"},tag:{type:String,default:"input"}},data(){return{userInput:this.value}},computed:{getPlaceholder(){return!!this.placeholder&&i.A.translate(this.placeholder,this.variables)},getTitle(){return!!this.title&&i.A.translate(this.title,this.variables)}},methods:{inputEvent(){this.$emit("input",this.$refs.field.value)},fireEvent(t){this.$emit(t.type,t)}},watch:{value(t){this.$refs.field.value=t,this.userInput=t}}},n=(0,s(14486).A)(r,a,[],!1,null,"c2781be6",null).exports},64164:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>ct});var a=function(){var t=this,e=t._self._c;return e("nc-app-sidebar",{staticClass:"passwords-sidebar-password",attrs:{name:t.sidebar.title,subtitle:t.subtitle,subtitleTooltip:t.subtitleTooltip,compact:t.compact,active:t.activeTab},on:{close:function(e){return t.close()},opened:t.opened,closed:t.closed},scopedSlots:t._u([{key:"secondary-actions",fn:function(){return[t.isEditable?e("nc-action-button",{staticClass:"passwords-password-edit",attrs:{"close-after-click":""},on:{click:function(e){return t.actions.edit()}}},[e("pencil-icon",{attrs:{slot:"icon",size:20},slot:"icon"}),t._v("\n            "+t._s(t.t("Edit password"))+"\n        ")],1):t._e(),t._v(" "),e("nc-action-button",{staticClass:"passwords-password-clone",attrs:{"close-after-click":""},on:{click:function(e){return t.actions.clone()}}},[e("content-copy-icon",{attrs:{slot:"icon",size:20},slot:"icon"}),t._v("\n            "+t._s(t.t("Edit as new"))+"\n        ")],1),t._v(" "),e("nc-action-button",{staticClass:"passwords-password-move",attrs:{"close-after-click":""},on:{click:function(e){return t.actions.move()}}},[e("folder-move-icon",{attrs:{slot:"icon",size:20},slot:"icon"}),t._v("\n            "+t._s(t.t("Move"))+"\n        ")],1),t._v(" "),e("nc-action-button",{staticClass:"passwords-password-change-page",attrs:{"close-after-click":""},on:{click:function(e){return t.actions.openChangePasswordPage()}}},[e("lock-reset-icon",{attrs:{slot:"icon",size:20},slot:"icon"}),t._v("\n            "+t._s(t.t("PasswordActionChangePwPage"))+"\n        ")],1),t._v(" "),e("nc-action-button",{staticClass:"passwords-password-qrcode",attrs:{"close-after-click":""},on:{click:function(e){return t.actions.qrcode()}}},[e("qrcode-icon",{attrs:{slot:"icon",size:20},slot:"icon"}),t._v("\n            "+t._s(t.t("PasswordActionQrcode"))+"\n        ")],1),t._v(" "),t.hasPrinting?e("nc-action-button",{staticClass:"passwords-password-print",attrs:{"close-after-click":""},on:{click:function(e){return t.actions.print()}}},[e("printer-icon",{attrs:{slot:"icon",size:20},slot:"icon"}),t._v("\n            "+t._s(t.t("PasswordActionPrint"))+"\n        ")],1):t._e(),t._v(" "),e("nc-action-button",{staticClass:"passwords-password-delete",attrs:{"close-after-click":""},on:{click:t.deleteAction}},[e("trash-can-icon",{attrs:{slot:"icon",size:20},slot:"icon"}),t._v("\n            "+t._s(t.t("Delete"))+"\n        ")],1)]},proxy:!0},{key:"tertiary-actions",fn:function(){return[e("favicon",{staticClass:"icon",attrs:{domain:t.password.website}}),t._v(" "),e("nc-button",{staticClass:"password-details-favorite",attrs:{"aria-label":t.t(t.password.favorite?"Remove from favorites":"Mark as favorite"),type:"tertiary"},on:{click:function(e){return e.preventDefault(),t.actions.favorite()}}},[t.password.favorite?e("star-icon",{attrs:{slot:"icon","fill-color":"var(--color-warning)",size:20},slot:"icon"}):e("star-outline-icon",{attrs:{slot:"icon",size:20},slot:"icon"})],1)]},proxy:!0}])},[t._v(" "),t._v(" "),t.compact?t._e():e("div",{attrs:{slot:"header"},slot:"header"},[e("preview",{attrs:{image:t.password.preview,icon:t.password.icon,link:t.password.url,host:t.password.website}})],1),t._v(" "),e("tags",{attrs:{slot:"description",value:t.password},slot:"description"}),t._v(" "),e("nc-app-sidebar-tab",{attrs:{icon:"icon-info",name:t.t("Details"),id:"details-tab"}},[e("pw-details",{attrs:{password:t.password}})],1),t._v(" "),t.password.notes?e("nc-app-sidebar-tab",{attrs:{icon:"icon-comment",name:t.t("Notes"),id:"notes-tab"}},[e("notes",{attrs:{password:t.password}})],1):t._e(),t._v(" "),t.hasSharing?e("nc-app-sidebar-tab",{attrs:{icon:"icon-share",name:t.t("Share"),id:"share-tab"}},[e("share",{attrs:{password:t.password}})],1):t._e(),t._v(" "),t.password.revisions?e("nc-app-sidebar-tab",{attrs:{icon:"icon-history",name:t.t("Revisions"),id:"revisions-tab"}},[e("revisions",{attrs:{password:t.password}})],1):t._e()],1)};a._withStripped=!0;var i=s(56423),r=s(10893),n=s(5460),o=s(89843),l=s(61338),c=s(10854),d=s(47600),h=s(57229),u=function(){var t=this,e=t._self._c;return t.showPreview?e("div",{staticClass:"preview-container"},[e(t.link?"web":"div",{tag:"component",staticClass:"inner-container",attrs:{href:t.link}},[e("div",{staticClass:"loader"},[e("img",{attrs:{src:t.loadingIcon,alt:""}})]),t._v(" "),e("div",{staticClass:"image",class:t.imgClass,style:t.style,on:{mouseover:t.imageMouseOver,mouseout:t.imageMouseOut}},[t.showImage?e("img",{attrs:{src:t.image,alt:""},on:{load:function(e){return t.imageLoaded(e)}}}):t._e()])])],1):t._e()};u._withStripped=!0;var p=s(59202),g=s(60736);const v={components:{Web:p.A},props:{image:{type:String,default:""},icon:{type:String,default:""},link:{type:String,default:""},host:{type:String,default:"default"}},data(){return{loading:!0,loadingIcon:this.icon,imgClass:"loading-hidden",showImage:!1,style:{marginTop:0}}},created(){this.loadFavicon(this.link),setTimeout((()=>{this.showImage=!0}),100)},computed:{showPreview:()=>window.innerWidth>640&&o.A.get("client.ui.password.details.preview")},methods:{imageMouseOver(t){if(this.loading)return;let e=t.target.height-290;e>0&&(this.imgClass=e<500?"image-loaded s1":e<1e3?"image-loaded s5":e<2500?"image-loaded s10":e<4e3?"image-loaded s15":"image-loaded s20",this.style.marginTop="-"+e+"px")},imageMouseOut(){this.style.marginTop=0},imageLoaded(t){t.target.src===this.image&&(this.loading=!1,this.imgClass="image-loaded")},loadFavicon(){setTimeout((async()=>{this.loading&&(this.loadingIcon=await g.A.fetch(this.host,96))}),450)}},watch:{image(){this.loading=!0,this.showImage=!1,this.imgClass="loading-hidden",this.style.marginTop=0,setTimeout((()=>{this.showImage=!0}),100),this.$el.scrollTop=0,this.$forceUpdate()},icon(t){this.loadingIcon=t},link(t){this.loadFavicon(t)}}};s(29455);var f=s(14486);const w=(0,f.A)(v,u,[],!1,null,null,null).exports;var m=s(96634),y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"details passwords-password-info",attrs:{slot:"details"},slot:"details"},[t._l(t.getCustomFields,(function(t,s){return e("detail-field",{key:s,attrs:{label:t.label,type:t.type,value:t.value}})})),t._v(" "),t.showDetails?e("translate",{staticClass:"header",attrs:{tag:"div",say:"Statistics"}}):t._e(),t._v(" "),t.showDetails?e("translate",{attrs:{tag:"div",say:"Created on"}},[e("span",[t._v(t._s(t.getDateTime(t.password.created)))])]):t._e(),t._v(" "),e("translate",{attrs:{tag:"div",say:"Last updated"}},[e("span",[t._v(t._s(t.getDateTime(t.password.edited)))])]),t._v(" "),t.showDetails?e("detail-field",{attrs:{label:"Id",type:"text",value:t.password.id}}):t._e(),t._v(" "),"string"!=typeof t.password.folder?e("translate",{attrs:{tag:"div",say:"Folder"}},[e("router-link",{staticClass:"link",attrs:{to:t.folderRoute}},[t._v("\n            "+t._s(t.password.folder.label)+"\n        ")])],1):t._e(),t._v(" "),t.showDetails?e("translate",{attrs:{tag:"div",say:"Revisions"}},[e("translate",{attrs:{say:"{count} revisions",variables:{count:t.countRevisions}}})],1):t._e(),t._v(" "),t.showDetails?e("translate",{attrs:{tag:"div",say:"Shares"}},[e("translate",{attrs:{say:"{count} shares",variables:{count:t.countShares}}})],1):t._e(),t._v(" "),t.showDetails?e("translate",{staticClass:"header",attrs:{tag:"div",say:"Security"}}):t._e(),t._v(" "),e("translate",{attrs:{tag:"div",say:"Status"}},["DUPLICATE"===t.password.statusCode?e("router-link",{staticClass:"security-link",attrs:{to:t.hashSearchRoute}},[e("translate",{class:t.getSecurityClass,attrs:{say:t.getSecurityStatus}})],1):e("translate",{class:t.getSecurityClass,attrs:{say:t.getSecurityStatus}})],1),t._v(" "),t.showDetails?e("translate",{attrs:{tag:"div",say:"Encryption applied on server",title:"The encryption applied by the server before storing the data in the database"}},[e("translate",{attrs:{say:t.getSseType}})],1):t._e(),t._v(" "),t.showDetails?e("translate",{attrs:{tag:"div",say:"Encryption applied on client",title:"The encryption applied by the client before sending the data to the server"}},[e("translate",{attrs:{say:t.getCseType}})],1):t._e(),t._v(" "),t.showDetails?t._e():e("translate",{attrs:{tag:"div",say:"PwDetailsEncryptionLabel",title:t.getSimpleEncryptionTitle}},[e("translate",{attrs:{say:t.getSimpleEncryptionType}})],1),t._v(" "),t.showDetails?e("detail-field",{attrs:{label:"SHA-1",type:"text",value:t.hash}}):t._e(),t._v(" "),e("div",{staticClass:"password-details-options"},[e("nc-checkbox-radio-switch",{attrs:{checked:t.showDetails},on:{"update:checked":function(e){t.showDetails=e}}},[t._v(t._s(t.t("PasswordDetailsAdvancedView")))])],1)],2)};y._withStripped=!0;var b=s(53024),_=s(74968),A=s(32073),S=s(80444);const C={components:{Web:p.A,DetailField:_.A,Translate:b.A,NcCheckboxRadioSwitch:A.A},props:{password:{type:Object}},data:()=>({showHiddenFields:o.A.get("client.ui.custom.fields.show.hidden"),showDetails:o.A.get("client.ui.password.details.advanced"),hash:""}),mounted(){this.computeHash()},computed:{countShares(){let t=0;for(let e in this.password.shares)this.password.shares.hasOwnProperty(e)&&t++;return t},countRevisions(){let t=0;for(let e in this.password.revisions)this.password.revisions.hasOwnProperty(e)&&t++;return t},getSecurityClass(){return["secure","weak","breached","unknown"][this.password.status]},getSecurityStatus(){return 1===this.password.status?`Weak (${this.password.statusCode.toLowerCase().capitalize()})`:3===this.password.status?`Unknown (${this.password.statusCode.toLowerCase().capitalize()})`:this.getSecurityClass.capitalize()},folderRoute(){return{name:"Folders",params:{folder:this.password.folder.id}}},hashSearchRoute(){return{name:"Search",params:{query:btoa("hash:"+this.password.hash)}}},getCustomFields(){let t=[],e=this.password.customFields;this.password.username&&t.push({label:S.A.translate("Username"),value:this.password.username}),t.push({label:S.A.translate("Password"),value:this.password.password,type:"secret"}),this.password.url&&t.push({label:S.A.translate("Website"),value:this.password.url,type:"url"});for(let s=0;s<e.length;s++)(this.showHiddenFields||"data"!==e[s].type)&&t.push(e[s]);return t},getSseType(){let t="Encryption"+this.password.sseType;switch(this.password.sseType){case"none":t="No encryption";break;case"SSEv1r1":t="Simple encryption (Gen. 1)";break;case"SSEv1r2":t="Simple encryption (Gen. 2)";break;case"SSEv2r1":t="Advanced encryption (SSE V2)"}return S.A.translate(t)},getCseType(){let t="No encryption";return"CSEv1r1"===this.password.cseType&&(t="Encryption with libsodium"),S.A.translate(t)},getSimpleEncryptionTitle(){return"CSEv1r1"===this.password.cseType?"PwDetailsEncryptionTitleCSE":"PwDetailsEncryptionTitleSSE"},getSimpleEncryptionType(){return"CSEv1r1"===this.password.cseType?"PasswordEncryptionCSE":"PasswordEncryptionSSE"}},methods:{getDateTime:t=>S.A.formatDateTime(t),async computeHash(){let t=this.password.hash;40===t.length?this.hash=t:this.hash=await i.A.getHash(this.password.password,"SHA-1",40)}},watch:{password(){this.computeHash()},showDetails(t){o.A.set("client.ui.password.details.advanced",!0===t)}}};s(81570);const k=(0,f.A)(C,y,[],!1,null,null,null).exports;var x=s(74095),T=s(57505),P=s(98244),E=s(3987),I=s(85361),D=s(21304),O=s(27263),L=s(71758),M=s(83850),V=s(270),$=s(51023),U=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"passwords-revision-list"},t._l(t.revisions,(function(s){return e("revision",{key:s.id,attrs:{password:t.password,revision:s}})})),1)};U._withStripped=!0;var z=function(){var t=this,e=t._self._c;return e("nc-list-item",{attrs:{name:t.revision.label,title:t.title,"force-display-actions":!0,compact:!0},on:{click:function(e){return t.viewAction()}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("favicon",{staticClass:"icon",attrs:{domain:t.revision.website}})]},proxy:!0},{key:"subname",fn:function(){return[t._v("\n        "+t._s(t.created)+"\n    ")]},proxy:!0},{key:"indicator",fn:function(){return[e("shield-half-full-icon",{attrs:{size:16,"fill-color":t.securityColor}})]},proxy:!0},{key:"actions",fn:function(){return[t.isCurrent?t._e():e("nc-action-button",{on:{click:function(e){return t.restoreAction()}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("restore-icon")]},proxy:!0}],null,!1,3685096525)},[t._v("\n            "+t._s(t.t("Restore revision"))+"\n        ")])]},proxy:!0}])})};z._withStripped=!0;var N=s(17638),R=s(69159),j=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon restore-icon",attrs:{"aria-hidden":!t.title||null,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M13,3A9,9 0 0,0 4,12H1L4.89,15.89L4.96,16.03L9,12H6A7,7 0 0,1 13,5A7,7 0 0,1 20,12A7,7 0 0,1 13,19C11.07,19 9.32,18.21 8.06,16.94L6.64,18.36C8.27,20 10.5,21 13,21A9,9 0 0,0 22,12A9,9 0 0,0 13,3Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])};j._withStripped=!0;const B={name:"RestoreIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},F=(0,f.A)(B,j,[],!1,null,null,null).exports;var W=s(22450),H=s(80914);const q={components:{RestoreIcon:F,Favicon:E.A,NcListItem:W.N,NcActionButton:T.default,ShieldHalfFullIcon:H.A},props:{password:{type:Object},revision:{type:Object}},computed:{created(){return S.A.formatDateTime(this.revision.created)},title(){return`${this.revision.label} – ${this.created}`},securityColor(){switch(this.revision.status){case 0:return"var(--color-success)";case 1:return"var(--color-warning)";case 2:return"var(--color-error)";case 3:return"var(--color-main-text)"}},isCurrent(){return this.revision.id===this.password.revision}},methods:{restoreAction(){N.A.restoreRevision(this.password,this.revision).catch(R.A.catch)},viewAction(){N.A.viewRevision(this.password,this.revision)}}},J=(0,f.A)(q,z,[],!1,null,null,null).exports;var Z=s(90512);const G={components:{Revision:J},props:{password:{type:Object}},computed:{revisions(){return Z.A.sortApiObjectArray(this.password.revisions,"created",!1)}}},Q=(0,f.A)(G,U,[],!1,null,null,null).exports;var K=function(){return(0,this._self._c)("sharing",{staticClass:"password-share-nextcloud",attrs:{password:this.password}})};K._withStripped=!0;var X=function(){var t=this,e=t._self._c;return e("div",{staticClass:"sharing-container"},[t.hasCse&&t.canBeShared?e("translate",{staticClass:"cse-warning warning",attrs:{tag:"div",say:"End-to-End encryption will be disabled for this password if you share it."}}):t._e(),t._v(" "),t.isSharedWithUser?e("div",{staticClass:"shareby-info",attrs:{title:t.getShareTitle}},[e("img",{attrs:{src:t.password.share.owner.icon,alt:""}}),t._v(" "),e("translate",{attrs:{say:"{name} has shared this password with you.",variables:t.password.share.owner}}),t._v(" "),t.getDefaultExpires?e("translate",{attrs:{say:"It will expire {date}.",variables:t.getExpirationDate}}):t._e()],1):t._e(),t._v(" "),t.canBeShared?e("field",{staticClass:"share-add-user",attrs:{placeholder:"Search user"},on:{keypress:function(e){return t.submitAction(e)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}):t._e(),t._v(" "),0!==t.shares.length?e("ul",{staticClass:"shares"},t._l(t.shares,(function(s){return e("share",{key:s.id,attrs:{share:s,"data-share-id":s.id,editable:t.isEditable},on:{delete:function(e){return t.deleteShare(e)},update:function(e){return t.refreshShares()}}})})),1):t._e(),t._v(" "),0!==t.matches.length?e("ul",{class:t.getDropdownClasses},t._l(t.matches,(function(s){return e("li",{on:{click:function(e){return t.shareWithUser(s.id)}}},[e("img",{staticClass:"avatar",attrs:{src:t.getAvatarUrl(s.id),alt:""}}),t._v(" "+t._s(s.name)+"\n        ")])})),0):t._e()],1)};X._withStripped=!0;var Y=s(20996),tt=function(){var t=this,e=t._self._c;return e("li",{staticClass:"share",attrs:{title:t.getTitle}},[e("div",{staticClass:"options"},[t.editable?e("translate",{class:{active:t.share.editable},attrs:{icon:"pencil",title:"Toggle write permissions"},on:{click:function(e){return t.toggleEditable(t.share)}}}):t._e(),t._v(" "),t.hasShareable?e("translate",{class:{active:t.share.shareable},attrs:{icon:"share-alt",title:"Toggle share permissions"},on:{click:function(e){return t.toggleShareable(t.share)}}}):t._e(),t._v(" "),e("translate",{class:{active:t.share.expires},attrs:{icon:"calendar",title:t.getExpirationDateTitle},on:{click:function(e){return t.setExpires(t.share)}}}),t._v(" "),e("translate",{attrs:{icon:"trash",title:"Stop sharing"},on:{click:function(e){return t.deleteAction(t.share)}}})],1),t._v(" "),e("img",{staticClass:"avatar",attrs:{src:t.share.receiver.icon,alt:t.share.receiver.name,loading:"lazy",width:"32",height:"32"}}),t._v(" "),t.share.updatePending?e("div",{staticClass:"loading"}):t._e(),t._v("\n    "+t._s(t.share.receiver.name)+"\n")])};tt._withStripped=!0;var et=s(33277);const st={components:{Translate:b.A},props:{share:{type:Object},editable:{type:Boolean}},data:()=>({hasShareable:o.A.get("server.sharing.resharing")}),computed:{getTitle(){if(this.share.updatePending)return S.A.translate("Some data is waiting to be synchronized")},getExpirationDateTitle(){return this.share.expires?S.A.translate("Expires {datetime}",{datetime:S.A.formatDateTime(this.share.expires)}):"Set expiration date"}},methods:{toggleEditable(t){t.editable=!t.editable,this.update(t)},toggleShareable(t){t.shareable=!t.shareable,this.update(t)},setExpires(t){let e={expires:{value:t.expires?new Date(t.expires).toISOString().substring(0,10):null,type:"date",label:"Date"}};et.A.form(e,"Set expiration date","Choose expiration date").then((e=>{let s=e.expires;if(0===s.length)s=null;else if(s=new Date(e.expires.replace(/([0-9]+)\.([0-9]+)\.([0-9]+)/g,"$2/$1/$3")),s<new Date)return void et.A.alert("Please choose a date in the future","Invalid date");t.expires=s,this.update(t)}))},async deleteAction(t){await i.A.deleteShare(t.id),this.$emit("delete",{id:t.id})},update(t){t.updatePending=!0,i.A.updateShare(t),this.$emit("update",{id:t.id}),this.$forceUpdate()}}};s(28412);const at=(0,f.A)(st,tt,[],!1,null,null,null).exports;var it=s(18221);const rt={components:{Field:Y.A,Share:at,Translate:b.A},props:{password:{type:Object}},data(){return{search:"",matches:[],nameMap:[],idMap:[],shares:this.password.hasOwnProperty("shares")?this.password.shares:[],hasCse:"none"!==this.password.cseType&&!this.password.shared,autocomplete:o.A.get("server.sharing.autocomplete"),interval:null,polling:{interval:null,mode:null},cronPromise:null}},created(){this.reloadShares(),this.startPolling()},beforeDestroy(){this.stopPolling()},computed:{canBeShared(){return this.password.hasOwnProperty("share")&&(null===this.password.share||"string"!=typeof this.password.share&&this.password.share.hasOwnProperty("shareable")&&this.password.share.shareable)},isEditable(){return null!==this.password.share&&"string"!=typeof this.password.share?this.password.share.editable:this.password.editable},getDefaultExpires(){return null!==this.password.share&&"string"!=typeof this.password.share?this.password.share.expires:null},getExpirationDate(){return null!==this.password.share&&"string"!=typeof this.password.share?{date:S.A.formatDate(this.password.share.expires),dateTime:S.A.formatDateTime(this.password.share.expires)}:{date:"",dateTime:""}},isSharedWithUser(){return this.password.share&&this.password.share.owner},getSharedWithUsers(){let t=[];for(let e in this.shares)this.shares.hasOwnProperty(e)&&t.push(this.shares[e].receiver.id);return null!==this.password.share&&t.push(this.password.share.owner.id),t},getShareTitle(){let t=S.A.translate(this.password.share.editable?"Editing allowed":"Editing disallowed"),e=S.A.translate(this.password.share.shareable?"sharing allowed":"sharing disallowed"),s=S.A.translate("{editable} and {shareable}.",{shareable:e,editable:t});return this.password.share.expires&&(s+=" "+S.A.translate("Expires {datetime}",this.getExpirationDate)),s},getDropdownClasses(){let t=["user-search"];return this.isSharedWithUser&&t.push("shared-with"),t}},methods:{async searchUsers(){if(""===this.search||!this.autocomplete||!this.canBeShared)return void(this.matches=[]);let t=this.getSharedWithUsers,e=await i.A.findSharePartners(this.search,t.length+10);this.matches=[];for(let s in e){if(!e.hasOwnProperty(s)||-1!==t.indexOf(s))continue;let a=e[s];this.matches.length<5&&this.matches.push({id:s,name:a}),this.nameMap[a]=s,this.idMap[s]=a}},async disableCse(){let t=Z.A.cloneObject(this.password);t.shared=!0,await N.A.updatePassword(t),this.hasCse=!1},async addShare(t){if(!this.canBeShared)return;this.hasCse&&await this.disableCse();let e={password:this.password.id,expires:this.getDefaultExpires,editable:o.A.get("user.sharing.editable"),shareable:o.A.get("user.sharing.resharing"),receiver:t};try{let s=await i.A.createShare(e);this.getSharedWithUsers.push(t),e.id=s.id,e.updatePending=!0,e.owner={id:document.querySelector("head[data-user]").getAttribute("data-user"),name:document.querySelector("head[data-user-displayname]").getAttribute("data-user-displayname")},e.receiver={id:t,name:this.idMap[t]},this.shares[s.id]=i.A._processShare(e),this.search="",this.refreshShares()}catch(e){if("65782183"===e.id)it.A.error(["The user {uid} does not exist",{uid:t}]);else{let t=e.hasOwnProperty("message")?e.message:e.statusText;it.A.error(["Unable to share password: {message}",{message:t}])}}},reloadShares(){i.A.showPassword(this.password.id,"shares").then((t=>{this.shares=t.shares})).catch(console.error)},submitAction(t){if(13===t.keyCode){let t=this.search;this.nameMap.hasOwnProperty(t)&&(t=this.nameMap[t]),this.idMap.hasOwnProperty(t)||!this.autocomplete?this.addShare(t):it.A.error(["The user {uid} does not exist",{uid:t}])}},shareWithUser(t){this.addShare(t)},getAvatarUrl:t=>i.A.getAvatarUrl(t),deleteShare(t){delete this.shares[t.id],this.refreshShares()},async refreshShares(){await this.runCron().then((t=>{t.success&&this.reloadShares()})),this.startPolling(),this.$forceUpdate()},startPolling(t="fast"){if(this.polling.mode===t)return;this.stopPolling();let e="slow"===t?6e4:5e3;this.polling.interval=setInterval((()=>{this.reloadShares()}),e)},stopPolling(){null!==this.polling.interval&&(clearInterval(this.polling.interval),this.polling.interval=null,this.polling.mode=null)},runCron(){return null===this.cronPromise&&(this.cronPromise=new Promise(((t,e)=>{i.A.runSharingCron().then((e=>{this.cronPromise=null,t(e)})).catch((t=>{this.cronPromise=null,console.error(t),e(t)}))}))),this.cronPromise}},watch:{password(t){this.shares=t.hasOwnProperty("shares")?t.shares:[],this.hasCse="none"!==t.cseType&&!t.shared,this.$forceUpdate()},search(){this.searchUsers()},shares(t){for(let e in t)if(t.hasOwnProperty(e)&&t[e].updatePending)return this.runCron(),void this.startPolling();this.startPolling("slow")}}};s(46563);const nt={components:{Sharing:(0,f.A)(rt,X,[],!1,null,null,null).exports,NcAppSidebarTab:h.A},props:{password:{type:Object}}},ot=(0,f.A)(nt,K,[],!1,null,null,null).exports,lt={components:{ContentCopyIcon:V.A,FolderMoveIcon:M.A,TrashCanIcon:L.A,QrcodeIcon:O.A,StarOutlineIcon:D.A,StarIcon:I.A,Favicon:E.A,PencilIcon:P.A,LockResetIcon:$.A,"printer-icon":()=>s.e(9834).then(s.bind(s,77668)),Share:ot,notes:()=>s.e(1103).then(s.bind(s,18209)),Revisions:Q,Tags:m.A,Preview:w,PwDetails:k,NcAppSidebar:d.N,NcActionButton:T.default,NcAppSidebarTab:h.A,NcButton:x.default},props:{sidebar:{type:c.A}},data(){return{password:this.sidebar.item,actions:new r.A(this.sidebar.item)}},mounted(){this.loadPassword().catch(console.error)},computed:{subtitle(){return S.A.formatDate(this.password.edited)},subtitleTooltip(){return S.A.formatDateTime(this.password.edited)},compact:()=>window.innerWidth<=640||window.innerHeight<=640||!o.A.get("client.ui.password.details.preview"),hasSharing:()=>o.A.get("server.sharing.enabled"),hasPrinting:()=>o.A.get("client.ui.password.print"),activeTab(){return`${this.sidebar.tab}-tab`},isEditable(){return this.password.editable}},methods:{async loadPassword(){this.password=await i.A.showPassword(this.sidebar.item.id,"model+folder+shares+tags+revisions"),this.actions=new r.A(this.password),(0,l.Ic)("passwords:sidebar:updated",this.sidebar)},close(){n.A.sidebar=null},opened(){(0,l.Ic)("passwords:sidebar:opened",this.sidebar)},closed(){(0,l.Ic)("passwords:sidebar:closed",this.sidebar)},deleteAction(){this.actions.delete().then((()=>{this.close()}))}},watch:{sidebar:{handler(t){t&&this.loadPassword().catch(console.error)},deep:!0}}};s(98476);const ct=(0,f.A)(lt,a,[],!1,null,null,null).exports},74968:(t,e,s)=>{"use strict";s.d(e,{A:()=>c});var a=function(){var t=this,e=t._self._c;return e("div",[t._v("\n    "+t._s(t.label)+"\n    "),-1!==["url","email","file"].indexOf(t.type)?e("web",{attrs:{href:t.getLink}},[t._v(t._s(t.getLinkLabel))]):t._e(),t._v(" "),"secret"===t.type?e("span",{class:t.getSecretClass,on:{mouseenter:function(e){t.showValue=!0},mouseout:function(e){t.showValue=!1},click:t.copyValue}},[t._v(t._s(t.getSecretValue))]):t._e(),t._v(" "),"text"===t.type||"data"===t.type?e("span",{on:{click:t.copyValue}},[t._v(t._s(t.value))]):t._e()],1)};a._withStripped=!0;var i=s(59202),r=s(89843),n=s(33277),o=s(90512);const l={components:{Web:i.A},props:{label:{type:String},type:{type:String,default:"text"},value:{type:String}},data:()=>({showValue:!1}),computed:{getSecretValue(){return""===this.value?"":this.showValue?this.value:"".padStart(12,"⚫")},getSecretClass(){return this.showValue?"secret visible":"secret"},getLinkLabel(){return"file"===this.type&&-1!==this.value.indexOf("/")?this.value.substr(this.value.lastIndexOf("/")+1):this.value},getLink(){return"email"===this.type?`mailto:${this.value}`:"file"===this.type?r.A.get("server.baseUrl.webdav")+this.value.substr(1):this.value}},methods:{copyValue(){let t="Error copying {element} to clipboard";o.A.copyToClipboard(this.value)&&(t="{element} was copied to clipboard"),n.A.notification([t,{element:this.label}])}}},c=(0,s(14486).A)(l,a,[],!1,null,null,null).exports},96634:(t,e,s)=>{"use strict";s.d(e,{A:()=>u});var a=function(){var t=this,e=t._self._c;return e("nc-select",{staticClass:"passwords-tags-field",class:{"no-wrap":t.noWrap},attrs:{"no-wrap":t.noWrap,multiple:!0,taggable:!0,closeOnSelect:!1,options:t.options,loading:t.loading,placeholder:t.t("Add Tags..."),"aria-label-combobox":t.t("Tags")},on:{"option:created":function(e){return t.createTag(e)}},scopedSlots:t._u([{key:"selected-option-container",fn:function({option:s,deselect:a,multiple:i,disabled:r}){return[e("div",{staticClass:"vs__selected",class:t.tagCssClass(s),style:{backgroundColor:s.color},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),a(s)},mousedown:function(t){t.preventDefault(),t.stopPropagation()}}},[t._v("\n            "+t._s(s.label)+"\n        ")])]}},{key:"option",fn:function({label:s,color:a}){return[e("div",{staticClass:"passwords-tag-option"},[e("tag-icon",{attrs:{"fill-color":a}}),t._v("\n            "+t._s(s)+"\n        ")],1)]}}]),model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})};a._withStripped=!0;var i=s(53024),r=s(67607),n=s(56423),o=s(48163),l=s(17638),c=s(43454),d=s(90512);const h={components:{TagIcon:c.A,Translate:i.A,NcSelect:r.A},props:{noWrap:{type:Boolean,default:!1},value:{type:[Array,Object],default:()=>[]}},data:()=>({tags:{},model:[],loading:!0,timeout:null}),computed:{tagIdsInValue(){let t;if(this.isPassword){if(!this.value.hasOwnProperty("tags"))return[];t=Array.isArray(this.value.tags)?this.value.tags:Object.keys(this.value.tags)}else t=Array.isArray(this.value)?this.value:Object.keys(this.value);return t},isPassword(){return this.value.hasOwnProperty("type")&&"password"===this.value.type},options(){let t=[],e=d.A.arrayPluck(this.model,"id");for(let s in this.tags)this.tags.hasOwnProperty(s)&&-1===e.indexOf(s)&&t.push(this.tags[s]);return d.A.sortApiObjectArray(t,"label")}},mounted(){this.loadTags()},methods:{loadTags(){n.A.listTags().then((t=>{this.tags=t,this.loading=!1,this.$nextTick((()=>{this.handleValueUpdate()}))}))},handleValueUpdate(){if(this.loading)return;let t=[];for(let e of this.tagIdsInValue)t.push(this.tags[e]);JSON.stringify(t)!==JSON.stringify(this.model)&&this.model.splice(0,this.model.length,...t)},createTag(t){"string"==typeof t&&(t={label:t}),o.A.createTagFromData(t).then((t=>{this.tags[t.id]=t;for(let e=0;e<this.model.length;e++)(!this.model[e].hasOwnProperty("id")&&this.model[e].label===t.label||this.model[e]===t.label)&&this.model.splice(e,1,t)}))},tagCssClass:t=>t.color?d.A.getColorLuma(t.color)<96?"is-dark":"is-bright":"is-dark",handleModelUpdate(t){if(this.loading)return;let e=d.A.arrayPluck(t,"id");if(JSON.stringify(this.tagIdsInValue)!==JSON.stringify(e)){let t={};for(let s of e)t[s]=this.tags[s];this.isPassword?(this.value.tags=t,this.updatePassword()):this.$emit("input",t)}},updatePassword(){null!==this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{let t=d.A.cloneObject(this.value);0===Object.keys(t.tags).length&&(t.tags=[""]),l.A.updatePassword(t).finally((()=>{this.timeout=null}))}),1e3)}},watch:{value:{deep:!0,handler(){this.handleValueUpdate()}},model(t){this.handleModelUpdate(t)}}};s(60331);const u=(0,s(14486).A)(h,a,[],!1,null,null,null).exports},59202:(t,e,s)=>{"use strict";s.d(e,{A:()=>l});var a=function(){var t=this,e=t._self._c;return e("a",{class:t.className,attrs:{href:t.getHref,target:t.getTarget,rel:t.getRel,title:t.getTitle}},[t.icon?e("icon",{class:t.iconClass,attrs:{icon:t.icon}}):t._e(),t._v("\n    "+t._s(t.getText)+"\n    "),t.getText?t._e():t._t("default")],2)};a._withStripped=!0;var i=s(13441),r=s(56423),n=s(80444);const o={components:{Icon:i.A},props:{href:{type:String},target:{type:String,default:null},title:{type:String,default:null},text:{type:String,default:null},variables:{type:Object,default:()=>({})},className:{type:String,default:"link"},icon:{type:String,default:null},iconClass:{type:String,default:null}},computed:{getText(){return this.text?n.A.translate(this.text,this.getVariables):""},getTitle(){let t=this.title?this.title:"Go to {href}";return n.A.translate(t,this.getVariables)},getVariables(){return this.variables.href=this.getHref,this.variables},getHref(){return this.href&&"javascript:"!==this.href.substr(0,11)?"mailto:"===this.href.substr(0,7)?this.href:r.A.parseUrl(this.href,"href"):location.href},getTarget(){return r.A.parseUrl(this.href,"host")!==location.host?"_blank":this.target?this.target:"_self"},getRel(){return"_blank"===this.getTarget?"noreferrer noopener":""}}};s(17959);const l=(0,s(14486).A)(o,a,[],!1,null,null,null).exports},81451:(t,e,s)=>{var a=s(84088);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals),(0,s(70534).A)("07daf7c6",a,!1,{})},98476:(t,e,s)=>{var a=s(90289);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals),(0,s(70534).A)("154b0785",a,!1,{})},29455:(t,e,s)=>{var a=s(58594);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals),(0,s(70534).A)("16147c42",a,!1,{})},28412:(t,e,s)=>{var a=s(62745);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals),(0,s(70534).A)("30fab953",a,!1,{})},46563:(t,e,s)=>{var a=s(57650);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals),(0,s(70534).A)("543c1285",a,!1,{})},81570:(t,e,s)=>{var a=s(87017);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals),(0,s(70534).A)("01d01ce0",a,!1,{})},60331:(t,e,s)=>{var a=s(37784);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals),(0,s(70534).A)("b1966e08",a,!1,{})},17959:(t,e,s)=>{var a=s(92770);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals),(0,s(70534).A)("b6cd61ce",a,!1,{})},57505:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>d}),s(81451);var a=s(47003),i=s(47683),r=s(5340),n=s(85156);const o={name:"NcActionButton",components:{CheckIcon:a.C,ChevronRightIcon:i.C},mixins:[r.A],inject:{isInSemanticMenu:{from:"NcActions:isSemanticMenu",default:!1}},props:{ariaHidden:{type:Boolean,default:null},disabled:{type:Boolean,default:!1},isMenu:{type:Boolean,default:!1},type:{type:String,default:"button",validator:t=>["button","checkbox","radio","reset","submit"].includes(t)},modelValue:{type:[Boolean,String],default:null},value:{type:String,default:null}},computed:{isFocusable(){return!this.disabled},isChecked(){return"radio"===this.type&&"boolean"!=typeof this.modelValue?this.modelValue===this.value:this.modelValue},nativeType(){return"submit"===this.type||"reset"===this.type?this.type:"button"},buttonAttributes(){const t={};return this.isInSemanticMenu?(t.role="menuitem","radio"===this.type?(t.role="menuitemradio",t["aria-checked"]=this.isChecked?"true":"false"):("checkbox"===this.type||"button"===this.nativeType&&null!==this.modelValue)&&(t.role="menuitemcheckbox",t["aria-checked"]=null===this.modelValue?"mixed":this.modelValue?"true":"false")):null!==this.modelValue&&"button"===this.nativeType&&(t["aria-pressed"]=this.modelValue?"true":"false"),t}},methods:{handleClick(t){this.onClick(t),null===this.modelValue&&"button"===this.type||("radio"===this.type&&"boolean"!=typeof this.modelValue?this.isChecked||this.$emit("update:modelValue",this.value):this.$emit("update:modelValue",!this.isChecked))}}};var l=function(){var t=this,e=t._self._c;return e("li",{staticClass:"action",class:{"action--disabled":t.disabled},attrs:{role:t.isInSemanticMenu&&"presentation"}},[e("button",t._b({class:["action-button button-vue",{"action-button--active":t.isChecked,focusable:t.isFocusable}],attrs:{"aria-label":t.ariaLabel,disabled:t.disabled,title:t.title,type:t.nativeType},on:{click:t.handleClick}},"button",t.buttonAttributes,!1),[t._t("icon",(function(){return[e("span",{staticClass:"action-button__icon",class:[t.isIconUrl?"action-button__icon--url":t.icon],style:{backgroundImage:t.isIconUrl?"url(".concat(t.icon,")"):null},attrs:{"aria-hidden":"true"}})]})),t.name?e("span",{staticClass:"action-button__longtext-wrapper"},[e("strong",{staticClass:"action-button__name"},[t._v(" "+t._s(t.name)+" ")]),e("br"),e("span",{staticClass:"action-button__longtext",domProps:{textContent:t._s(t.text)}})]):t.isLongText?e("span",{staticClass:"action-button__longtext",domProps:{textContent:t._s(t.text)}}):e("span",{staticClass:"action-button__text"},[t._v(t._s(t.text))]),t.isMenu?e("ChevronRightIcon",{staticClass:"action-button__menu-icon",attrs:{size:20}}):!0===t.isChecked?e("CheckIcon",{staticClass:"action-button__pressed-icon",attrs:{size:20}}):!1===t.isChecked?e("span",{staticClass:"action-button__pressed-icon material-design-icon"}):t._e(),t._e()],2)])},c=[];const d=(0,n.n)(o,l,c,!1,null,"dba65098",null,null).exports},32073:(t,e,s)=>{"use strict";s.d(e,{A:()=>a.N});var a=s(9827)},67607:(t,e,s)=>{"use strict";s.d(e,{A:()=>a.N});var a=s(30987)},47003:(t,e,s)=>{"use strict";s.d(e,{C:()=>o});var a=s(85156);const i={name:"CheckIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var r=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon check-icon",attrs:{"aria-hidden":!t.title||null,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},n=[];const o=(0,a.n)(i,r,n,!1,null,null,null,null).exports},47683:(t,e,s)=>{"use strict";s.d(e,{C:()=>o});var a=s(85156);const i={name:"ChevronRightIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var r=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon chevron-right-icon",attrs:{"aria-hidden":!t.title||null,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},n=[];const o=(0,a.n)(i,r,n,!1,null,null,null,null).exports},43239:(t,e,s)=>{"use strict";s.d(e,{C:()=>o});var a=s(85156);const i={name:"CloseIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var r=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon close-icon",attrs:{"aria-hidden":!t.title||null,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},n=[];const o=(0,a.n)(i,r,n,!1,null,null,null,null).exports}}]);