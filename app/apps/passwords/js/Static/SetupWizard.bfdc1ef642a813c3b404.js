/*! For license information please see SetupWizard.bfdc1ef642a813c3b404.js.LICENSE.txt */
(self.webpackChunkncpasswords=self.webpackChunkncpasswords||[]).push([[307],{92770:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>a});const a={}},25050:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>a});const a={}},46526:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>a});const a={}},57500:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>a});const a={}},61724:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>a});const a={}},32415:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>a});const a={}},97823:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>a});const a={}},54938:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>a});const a={}},59202:(t,e,s)=>{"use strict";s.d(e,{A:()=>o});var a=function(){var t=this,e=t._self._c;return e("a",{class:t.className,attrs:{href:t.getHref,target:t.getTarget,rel:t.getRel,title:t.getTitle}},[t.icon?e("icon",{class:t.iconClass,attrs:{icon:t.icon}}):t._e(),t._v("\n    "+t._s(t.getText)+"\n    "),t.getText?t._e():t._t("default")],2)};a._withStripped=!0;var r=s(13441),n=s(56423),i=s(80444);const l={components:{Icon:r.A},props:{href:{type:String},target:{type:String,default:null},title:{type:String,default:null},text:{type:String,default:null},variables:{type:Object,default:()=>({})},className:{type:String,default:"link"},icon:{type:String,default:null},iconClass:{type:String,default:null}},computed:{getText(){return this.text?i.A.translate(this.text,this.getVariables):""},getTitle(){let t=this.title?this.title:"Go to {href}";return i.A.translate(t,this.getVariables)},getVariables(){return this.variables.href=this.getHref,this.variables},getHref(){return this.href&&"javascript:"!==this.href.substr(0,11)?"mailto:"===this.href.substr(0,7)?this.href:n.A.parseUrl(this.href,"href"):location.href},getTarget(){return n.A.parseUrl(this.href,"host")!==location.host?"_blank":this.target?this.target:"_self"},getRel(){return"_blank"===this.getTarget?"noreferrer noopener":""}}};s(17959);const o=(0,s(14486).A)(l,a,[],!1,null,null,null).exports},61648:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>D});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"background",attrs:{id:"passwords-setup"},on:{click:function(e){return t.closeAction(e)}}},[e("div",{attrs:{id:"setup-container"}},[e("div",{staticClass:"setup-header"},[e("translate",{attrs:{tag:"h1",say:t.current.title}})],1),t._v(" "),e("ul",{staticClass:"setup-content",style:t.getStyle},[t.hasSlide("start")?e("start",{staticClass:"slide",attrs:{id:"setup-slide-start"}}):t._e(),t._v(" "),t.hasSlide("encryption")?e("encryption",{staticClass:"slide",attrs:{id:"setup-slide-encryption","is-current":1===t.currentId},on:{status:t.updateStatus,continue:t.nextSlide}}):t._e(),t._v(" "),t.hasSlide("admin-settings")?e("admin-settings",{staticClass:"slide",attrs:{id:"setup-slide-admin-settings"}}):t._e(),t._v(" "),t.hasSlide("user-settings")?e("user-settings",{staticClass:"slide",attrs:{id:"setup-slide-user-settings"}}):t._e(),t._v(" "),t.hasSlide("get-help")?e("get-help",{staticClass:"slide",attrs:{id:"setup-slide-get-help"},on:{redirect:function(e){return t.openSection(e,!1)}}}):t._e(),t._v(" "),t.hasSlide("integrations")?e("integrations",{staticClass:"slide",attrs:{id:"setup-slide-integrations"},on:{redirect:t.openSection}}):t._e()],1),t._v(" "),e("div",{staticClass:"setup-navigation"},[t.showSkipButton?e("translate",{staticClass:"skip",attrs:{tag:"div",say:"Skip"},on:{click:t.nextSlide}}):t._e(),t._v(" "),t.showCustomButton?e("translate",{staticClass:"continue",class:t.current.action.class,attrs:{tag:"div",say:t.current.action.label,title:t.current.action.title},on:{click:t.current.action.click}}):t._e(),t._v(" "),t.showCustomButton?t._e():e("translate",{staticClass:"continue",attrs:{tag:"div",say:t.continueText},on:{click:t.nextSlide}})],1)])])};a._withStripped=!0;var r=s(56423),n=s(4354),i=s(53024),l=function(){var t=this,e=t._self._c;return e("li",[e("div",[t._v("\n        "+t._s(t.t("StartText1"))+"\n        "),e("div",{staticClass:"spacer"}),t._v("\n        "+t._s(t.t("StartText2"))+"\n    ")])])};l._withStripped=!0;s(71098);var o=s(14486);const c=(0,o.A)({},l,[],!1,null,null,null).exports;var u=function(){var t=this,e=t._self._c;return e("li",[e("p",[e("translate",{attrs:{say:"Whenever you don't know how something works, have questions or need help with a problem:"}}),t._v(" "),e("translate",{attrs:{say:"Help is just around the corner."}}),t._v(" "),e("translate",{attrs:{say:'Our built-in handbook can be found by clicking on "More" and explains the app in all details.'}}),t._v(" "),e("translate",{attrs:{say:"In any other case, our community is the right place to ask your questions."}})],1),t._v(" "),e("div",{staticClass:"help-options"},[e("translate",{attrs:{tag:"a",say:"Handbook",icon:"book"},on:{click:function(e){return e.preventDefault(),t.openHelp.apply(null,arguments)}}}),t._v(" "),e("web",{attrs:{text:"Forum",icon:"users",target:"_blank",href:"https://help.nextcloud.com/c/apps/passwords"}}),t._v(" "),e("web",{attrs:{text:"Chat",icon:"telegram",href:"https://t.me/nc_passwords/1"}})],1)])};u._withStripped=!0;var d=s(59202),p=s(18221);const h={components:{Web:d.A,Translate:i.A},methods:{openHelp(){this.$emit("redirect",{path:"/help"}),p.A.info("Handbook will be opened after the tutorial")}}};s(6225);const g=(0,o.A)(h,u,[],!1,null,null,null).exports;var v=s(89843),y=function(){var t=this,e=t._self._c;return e("li",[e("p",[e("translate",{attrs:{say:"Passwords offers modern and strong encryption to protect your data from prying eyes."}}),t._v(" "),e("translate",{attrs:{say:"Choose a secure password below to activate the ultimate protection for your passwords."}})],1),t._v(" "),t.processing?t._e():e("form",{on:{submit:t.setPassword}},[e("div",{staticClass:"password-setup"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:t.t("Password (min. 12 characters)"),title:t.t("Enter a password with 12 characters or more"),pattern:".{12,}",readonly:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.confirm,expression:"confirm"}],attrs:{type:"password",placeholder:t.t("Repeat your password"),title:t.t("Repeat your password")},domProps:{value:t.confirm},on:{input:function(e){e.target.composing||(t.confirm=e.target.value)}}}),t._v(" "),t.advanced?e("div",{staticClass:"advanced"},[e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.encryptDb,expression:"encryptDb"}],attrs:{type:"checkbox",id:"encrypt-all"},domProps:{checked:Array.isArray(t.encryptDb)?t._i(t.encryptDb,null)>-1:t.encryptDb},on:{change:function(e){var s=t.encryptDb,a=e.target,r=!!a.checked;if(Array.isArray(s)){var n=t._i(s,null);a.checked?n<0&&(t.encryptDb=s.concat([null])):n>-1&&(t.encryptDb=s.slice(0,n).concat(s.slice(n+1)))}else t.encryptDb=r}}}),t._v(" "),e("translate",{attrs:{tag:"label",for:"encrypt-all",say:"Encrypt my existing passwords"}})],1),t._v(" "),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.savePassword,expression:"savePassword"}],attrs:{type:"checkbox",id:"save-password"},domProps:{checked:Array.isArray(t.savePassword)?t._i(t.savePassword,null)>-1:t.savePassword},on:{change:function(e){var s=t.savePassword,a=e.target,r=!!a.checked;if(Array.isArray(s)){var n=t._i(s,null);a.checked?n<0&&(t.savePassword=s.concat([null])):n>-1&&(t.savePassword=s.slice(0,n).concat(s.slice(n+1)))}else t.savePassword=r}}}),t._v(" "),e("translate",{attrs:{tag:"label",for:"save-password",say:"Save the password"}})],1)]):t._e()])]),t._v(" "),t.processing?e("div",{staticClass:"encryption-status"},[e("translate",{attrs:{tag:"h2",say:"Installing Encryption"}}),t._v(" "),e("div",[e("translate",{attrs:{say:"Keychain"}}),t._v(" "),e("span",{class:t.getKeychainClass},[t._v(t._s(t.getKeychainStatus))])],1),t._v(" "),t.encryptDb?e("div",[e("translate",{attrs:{say:"Folders"}}),t._v(" "),e("span",{class:t.getFolderClass},[t._v(t._s(t.getFolderStatus))])],1):t._e(),t._v(" "),t.encryptDb?e("div",[e("translate",{attrs:{say:"Tags"}}),t._v(" "),e("span",{class:t.getTagsClass},[t._v(t._s(t.getTagsStatus))])],1):t._e(),t._v(" "),t.encryptDb?e("div",[e("translate",{attrs:{say:"Passwords"}}),t._v(" "),e("span",{class:t.getPasswordsClass},[t._v(t._s(t.getPasswordsStatus))])],1):t._e(),t._v(" "),t.encryptDb?e("div",[e("translate",{attrs:{say:"Clean up"}}),t._v(" "),e("span",{class:t.getCleanupClass},[t._v(t._s(t.getCleanupStatus))])],1):t._e(),t._v(" "),t.ready&&!t.hasError?e("translate",{staticClass:"result success",attrs:{tag:"div",say:"Success"}}):t._e(),t._v(" "),t.hasError?e("translate",{staticClass:"result failure",attrs:{tag:"div",say:"Failed"}}):t._e()],1):t._e()])};y._withStripped=!0;var w=s(98498);const _={components:{Translate:i.A},props:{isCurrent:{type:Boolean,default:!1}},data:()=>({password:"",confirm:"",processing:!1,ready:!1,hasError:!1,advanced:v.A.get("client.settings.advanced"),savePassword:!0,encryptDb:!0,status:{keychain:{status:"waiting",current:0,total:0},folders:{status:"waiting",current:0,total:0},tags:{status:"waiting",current:0,total:0},passwords:{status:"waiting",current:0,total:0},cleanup:{status:"waiting",current:0,total:0}}}),created(){setTimeout((()=>{document.querySelector(".password-setup > [type=password]").removeAttribute("readonly")}),250)},computed:{getKeychainClass(){return this.getStatusClass("keychain")},getFolderClass(){return this.getStatusClass("folders")},getTagsClass(){return this.getStatusClass("tags")},getPasswordsClass(){return this.getStatusClass("passwords")},getCleanupClass(){return this.getStatusClass("cleanup")},getKeychainStatus(){return this.getStatusText("keychain")},getFolderStatus(){return this.getStatusText("folders")},getTagsStatus(){return this.getStatusText("tags")},getPasswordsStatus(){return this.getStatusText("passwords")},getCleanupStatus(){return this.getStatusText("cleanup")}},methods:{getStatusClass(t){return this.hasError&&"success"!==this.status[t].status?"status failed":"waiting"===this.status[t].status?"status loading":`status ${this.status[t].status}`},getStatusText(t){return"failed"===this.status[t].status||this.hasError?"✖":"processing"===this.status[t].status?this.status[t].current+" / "+this.status[t].total:"success"===this.status[t].status?"✔":void 0},async setPassword(){if(await this.checkPassword()&&!this.processing){this.processing=!0,this.sendStatusEvent();try{await w.A.install(this.password,this.savePassword,this.encryptDb,(t=>{this.updateEncryptionStatus(t)}))}catch(t){console.error(t)}this.ready=!0,this.sendStatusEvent()}},updateEncryptionStatus(t){for(let e in this.status)this.status.hasOwnProperty(e)&&(this.status[e].current=t[e].current,this.status[e].status=t[e].status,this.status[e].total=t[e].total,"failed"===t[e].status&&(this.hasError=!0));"failed"===t.keychain.status&&(this.hasError=!0)},sendStatusEvent(){let t={action:{label:"Save",title:"Your password needs at least 12 characters and the confirmation password must be the same",class:"disabled",click:()=>{}},skippable:!this.processing,id:"encryption"};this.processing&&(t.action.title="Encryption in progress…"),this.password.length>=12&&this.password===this.confirm&&!this.processing&&(t.action.class="",t.action.title="Continue",t.action.click=t=>{this.setPassword(t)}),this.ready&&(t.action.label="Continue",t.action.class="",t.action.title="",t.action.click=t=>{this.$emit("continue",{})}),this.$emit("status",t)},async checkPassword(){return!!await w.A.isPassphraseSecure(this.password)||(this.password="",this.confirm="",!1)}},watch:{isCurrent(t){t&&this.sendStatusEvent()},confirm(){this.sendStatusEvent()},password(){this.sendStatusEvent()}}};s(75983);const f=(0,o.A)(_,y,[],!1,null,null,null).exports;var m=function(){var t=this,e=t._self._c;return e("li",[e("p",[e("translate",{attrs:{say:"Access your passwords with ease from anywhere, thanks to our apps and extensions."}}),t._v(" "),e("translate",{attrs:{say:'You can find our Apps and Extensions section in "More" or just click the button below.'}})],1),t._v(" "),e("translate",{staticClass:"setup-cta",attrs:{tag:"div",say:"Go to Apps and Extensions"},on:{click:t.openApps}})],1)};m._withStripped=!0;const A={components:{Translate:i.A},methods:{openApps(){this.$emit("redirect",{path:"/apps"})}}};s(45192);const b=(0,o.A)(A,m,[],!1,null,null,null).exports;var S=function(){var t=this,e=t._self._c;return e("li",[e("p",[e("translate",{attrs:{say:"There are many settings so you can customize your experience."}}),t._v(" "),e("translate",{attrs:{say:'You can find all of them in "More", but we put the most common here:'}})],1),t._v(" "),e("div",{staticClass:"app-settings-container"},[e("translate",{attrs:{tag:"label",for:"settings-section",say:"After launch, show my"}}),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.section,expression:"section"}],attrs:{id:"settings-section"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.section=e.target.multiple?s:s[0]}}},[e("translate",{attrs:{tag:"option",value:"folders",say:"folders"}}),t._v(" "),e("translate",{attrs:{tag:"option",value:"tags",say:"tags"}}),t._v(" "),e("translate",{attrs:{tag:"option",value:"favorites",say:"favorites"}}),t._v(" "),e("translate",{attrs:{tag:"option",value:"all",say:"passwords"}}),t._v(" "),e("translate",{attrs:{tag:"option",value:"recent",say:"recently changed"}})],1),t._v(" "),e("translate",{staticClass:"header",attrs:{tag:"div",say:"Mark my passwords if..."}}),t._v(" "),e("div",{staticClass:"setting"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.hasAge,expression:"hasAge"}],attrs:{type:"checkbox",id:"settings-has-age"},domProps:{checked:Array.isArray(t.hasAge)?t._i(t.hasAge,null)>-1:t.hasAge},on:{change:function(e){var s=t.hasAge,a=e.target,r=!!a.checked;if(Array.isArray(s)){var n=t._i(s,null);a.checked?n<0&&(t.hasAge=s.concat([null])):n>-1&&(t.hasAge=s.slice(0,n).concat(s.slice(n+1)))}else t.hasAge=r}}}),t._v(" "),e("translate",{attrs:{tag:"label",say:"they are older than",for:"settings-has-age"}}),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model.number",value:t.maxAge,expression:"maxAge",modifiers:{number:!0}}],attrs:{id:"settings-age",disabled:!t.hasAge},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var s="_value"in e?e._value:e.value;return t._n(s)}));t.maxAge=e.target.multiple?s:s[0]}}},[e("translate",{attrs:{tag:"option",value:"90",say:"three months"}}),t._v(" "),e("translate",{attrs:{tag:"option",value:"180",say:"six months"}}),t._v(" "),e("translate",{attrs:{tag:"option",value:"356",say:"one year"}}),t._v(" "),e("translate",{attrs:{tag:"option",value:"712",say:"two years"}}),t._v(" "),t.customAge?e("translate",{attrs:{tag:"option",value:t.customAge,say:"{days} days",variables:{days:t.customAge}}}):t._e()],1)],1),t._v(" "),e("div",{staticClass:"setting"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.duplicates,expression:"duplicates"}],attrs:{type:"checkbox",id:"settings-duplicates"},domProps:{checked:Array.isArray(t.duplicates)?t._i(t.duplicates,null)>-1:t.duplicates},on:{change:function(e){var s=t.duplicates,a=e.target,r=!!a.checked;if(Array.isArray(s)){var n=t._i(s,null);a.checked?n<0&&(t.duplicates=s.concat([null])):n>-1&&(t.duplicates=s.slice(0,n).concat(s.slice(n+1)))}else t.duplicates=r}}}),t._v(" "),e("translate",{attrs:{tag:"label",say:"they are duplicates",for:"settings-duplicates"}})],1),t._v(" "),e("div",{staticClass:"header"},[e("translate",{attrs:{tag:"label",say:"Make my new passwords",for:"settings-strength"}}),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model.number",value:t.strength,expression:"strength",modifiers:{number:!0}}],attrs:{id:"settings-strength"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var s="_value"in e?e._value:e.value;return t._n(s)}));t.strength=e.target.multiple?s:s[0]}}},[e("translate",{attrs:{tag:"option",value:"1",say:"strong"}}),t._v(" "),e("translate",{attrs:{tag:"option",value:"2",say:"stronger"}}),t._v(" "),e("translate",{attrs:{tag:"option",value:"3",say:"very strong"}}),t._v(" "),e("translate",{attrs:{tag:"option",value:"4",say:"extremely strong"}})],1)],1),t._v(" "),e("div",{staticClass:"setting"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.numbers,expression:"numbers"}],attrs:{type:"checkbox",id:"settings-numbers"},domProps:{checked:Array.isArray(t.numbers)?t._i(t.numbers,null)>-1:t.numbers},on:{change:function(e){var s=t.numbers,a=e.target,r=!!a.checked;if(Array.isArray(s)){var n=t._i(s,null);a.checked?n<0&&(t.numbers=s.concat([null])):n>-1&&(t.numbers=s.slice(0,n).concat(s.slice(n+1)))}else t.numbers=r}}}),t._v(" "),e("translate",{attrs:{tag:"label",say:"include numbers",for:"settings-numbers"}})],1),t._v(" "),e("div",{staticClass:"setting"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.special,expression:"special"}],attrs:{type:"checkbox",id:"settings-special"},domProps:{checked:Array.isArray(t.special)?t._i(t.special,null)>-1:t.special},on:{change:function(e){var s=t.special,a=e.target,r=!!a.checked;if(Array.isArray(s)){var n=t._i(s,null);a.checked?n<0&&(t.special=s.concat([null])):n>-1&&(t.special=s.slice(0,n).concat(s.slice(n+1)))}else t.special=r}}}),t._v(" "),e("translate",{attrs:{tag:"label",say:"include special characters",for:"settings-special"}})],1)],1)])};S._withStripped=!0;const k={components:{Translate:i.A},data(){let t=v.A.get("client.ui.section.default"),e=v.A.get("user.password.security.age"),s=v.A.get("user.password.generator.numbers"),a=v.A.get("user.password.generator.special"),r=v.A.get("user.password.generator.strength"),n=v.A.get("user.password.security.duplicates"),i=e>0,l=-1===[0,90,180,356,712].indexOf(e)&&e;return 0===e&&(e=356),{section:t,duplicates:n,customAge:l,strength:r,numbers:s,special:a,hasAge:i,maxAge:e}},methods:{},watch:{hasAge(t){v.A.set("user.password.security.age",t?this.maxAge:0)},maxAge(t){v.A.set("user.password.security.age",this.hasAge?t:0)},duplicates(t){v.A.set("user.password.security.duplicates",t)},section(t){v.A.set("client.ui.section.default",t)},strength(t){v.A.set("user.password.generator.strength",t)},numbers(t){v.A.set("user.password.generator.numbers",!0===t)},special(t){v.A.set("user.password.generator.special",!0===t)}}};s(98393);const P=(0,o.A)(k,S,[],!1,null,null,null).exports;var C=function(){var t=this,e=t._self._c;return e("li",[e("p",[e("translate",{attrs:{say:"Passwords can be customized in a lot of different ways."}}),t._v(" "),e("translate",{attrs:{say:"As administrator you might want to take a look at these common settings."}})],1),t._v(" "),e("div",{staticClass:"admin-settings-container"},[e("translate",{attrs:{tag:"label",say:"Check password security with"}}),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.settings.security.value,expression:"settings.security.value"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.settings.security,"value",e.target.multiple?s:s[0])}}},t._l(t.settings.security.options,(function(t,s){return e("translate",{key:s,attrs:{tag:"option",value:t.value,say:t.label,disabled:!t.available}})})),1),t._v(" "),e("translate",{attrs:{tag:"label",say:"Generate passwords using"}}),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.settings.words.value,expression:"settings.words.value"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.settings.words,"value",e.target.multiple?s:s[0])}}},t._l(t.settings.words.options,(function(t,s){return e("translate",{key:s,attrs:{tag:"option",value:t.value,say:t.label,disabled:!t.available}})})),1),t._v(" "),e("translate",{attrs:{tag:"label",say:"Get favicons from"}}),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.settings.favicon.value,expression:"settings.favicon.value"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.settings.favicon,"value",e.target.multiple?s:s[0])}}},t._l(t.settings.favicon.options,(function(t,s){return e("translate",{key:s,attrs:{tag:"option",value:t.value,say:t.label,disabled:!t.available}})})),1),t._v(" "),e("translate",{attrs:{tag:"label",say:"Get website previews from"}}),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.settings.preview.value,expression:"settings.preview.value"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.settings.preview,"value",e.target.multiple?s:s[0])}}},t._l(t.settings.preview.options,(function(t,s){return e("translate",{key:s,attrs:{tag:"option",value:t.value,say:t.label,disabled:!t.available}})})),1),t._v(" "),e("translate",{attrs:{tag:"label",say:"Make backups"}}),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.settings.backups.value,expression:"settings.backups.value"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.settings.backups,"value",e.target.multiple?s:s[0])}}},t._l(t.settings.backups.options,(function(t,s){return e("translate",{key:s,attrs:{tag:"option",value:t.value,say:t.label,disabled:!t.available}})})),1)],1),t._v(" "),e("translate",{staticClass:"cta-admin-settings",attrs:{tag:"a",icon:"cog",href:t.getAppSettingsLink,target:"_blank",say:"View all settings"}}),t._v(" "),e("translate",{staticClass:"admin-notes",attrs:{tag:"a",href:"https://git.mdns.eu/nextcloud/passwords/-/wikis/Administrators/F.A.Q",target:"_blank",say:"Read our tips for admins"}})],1)};C._withStripped=!0;var x=s(90512),T=s(69159);class E{getAll(){return this._createRequest("settings")}get(t){return this._createRequest(`settings/${t}`)}set(t,e){return this._createRequest(`settings/${t}`,{value:e},"PUT")}reset(t){return this._createRequest(`settings/${t}`,null,"DELETE")}listCaches(){return this._createRequest("caches")}clearCache(t){return this._createRequest(`caches/${t}`,null,"DELETE")}async _createRequest(t,e=null,s="GET"){let a={method:s,credentials:"include"};a.headers=new Headers,a.headers.append("Accept","application/json, text/plain, */*"),a.headers.append("requesttoken",OC.requestToken),e&&("GET"===s&&(a.method="POST"),a.headers.append("Content-Type","application/json"),a.body=JSON.stringify(e));try{let e=x.A.generateUrl(`/apps/passwords/admin/${t}`),s=await fetch(new Request(e,a),a);return await E._processResponse(s)}catch(t){throw T.A.error("Request failed",t),t}}static async _processResponse(t){if(!t.ok)throw T.A.error(t),new Error("Api request failed");let e=t.headers.get("content-type");if(e&&-1!==e.indexOf("application/json"))return await t.json();throw T.A.error("Invalid response format",t),new Error("Invalid response format")}}const O={components:{Translate:i.A},data:()=>({api:new E,settings:{security:{value:null,options:{}},words:{value:null,options:{}},favicon:{value:null,options:{}},preview:{value:null,options:{}},backups:{value:null,options:{}}},oldSettings:{}}),created(){this.api.get("service.security").then((t=>{this.settings.security=t})),this.api.get("service.words").then((t=>{this.settings.words=t})),this.api.get("service.favicon").then((t=>{this.settings.favicon=t})),this.api.get("service.preview").then((t=>{this.settings.preview=t})),this.api.get("backup.interval").then((t=>{this.settings.backups=t}))},computed:{getAppSettingsLink:()=>x.A.generateUrl("/settings/admin/passwords")},watch:{settings:{handler(t){for(let e in t)t.hasOwnProperty(e)&&this.oldSettings.hasOwnProperty(e)&&t[e].value!==this.oldSettings[e].value&&null!==this.oldSettings[e].value&&(t[e].value!==t[e].default?this.api.set(t[e].name,t[e].value):this.api.reset(t[e].name));this.oldSettings=JSON.parse(JSON.stringify(t))},deep:!0}}};s(72335);const N=(0,o.A)(O,C,[],!1,null,null,null).exports,$={components:{UserSettings:P,Integrations:b,Encryption:f,Translate:i.A,GetHelp:g,Start:c,AdminSettings:N},props:{enableSlides:{type:Array,default(){let t=["start","user-settings","get-help","integrations"];if(r.A.hasEncryption||t.splice(1,0,"encryption"),OC.isUserAdmin()){let e=t.indexOf("user-settings");t.splice(e,0,"admin-settings")}return t}},closable:{type:Boolean,default:!1},redirect:{type:Boolean,default:!0},_close:{type:Function}},data(){let t=[{title:"A safe home for your passwords",id:"start"},{title:"Keep your passwords secret",skippable:!0,action:null,id:"encryption"},{title:"Customize your experience",id:"admin-settings"},{title:"Customize your experience",id:"user-settings"},{title:"Find help when you need it",id:"get-help"},{title:"Get connected",id:"integrations"}];for(let e=0;e<t.length;e++)-1===this.enableSlides.indexOf(t[e].id)&&(t.splice(e,1),e--);return{current:t[0],currentId:0,isDefaultRoute:!0,route:{path:"/"},slides:t}},computed:{getStyle(){return this.currentId<1?"":window.innerWidth>900?`transform: translateX(-${900*this.currentId}px);`:`transform: translateX(-${100*this.currentId}vw);`},continueText(){return this.currentId===this.slides.length-1?"Close":"Continue"},showSkipButton(){return this.current.skippable},showCustomButton(){return this.current.hasOwnProperty("action")&&null!==this.current.action}},methods:{hasSlide(t){return-1!==this.enableSlides.indexOf(t)},goToSlide(t){this.slides.hasOwnProperty(t)&&(this.current=this.slides[t],this.currentId=t)},nextSlide(){this.currentId<this.slides.length-1?this.goToSlide(this.currentId+1):this.closeWizard()},openSection(t,e=!0){this.route=t,this.isDefaultRoute=!1,e&&this.closeWizard()},updateStatus(t){t.id===this.current.id&&(t.hasOwnProperty("skippable")&&(this.current.skippable=!0===t.skippable),t.hasOwnProperty("action")&&(this.current.action=t.action))},closeWizard(){v.A.set("client.setup.initialized",!0),this.$destroy(),this.$el.parentNode.removeChild(this.$el),!this.redirect&&this.isDefaultRoute||n.A.push(this.route),this._close&&this._close()},closeAction(t){this.closable&&"passwords-setup"===t.target.id&&this.current.skippable&&this.closeWizard()}}};s(23175);const D=(0,o.A)($,a,[],!1,null,null,null).exports},17959:(t,e,s)=>{var a=s(92770);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals),(0,s(70534).A)("b6cd61ce",a,!1,{})},23175:(t,e,s)=>{var a=s(25050);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals),(0,s(70534).A)("366d5e94",a,!1,{})},72335:(t,e,s)=>{var a=s(46526);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals),(0,s(70534).A)("30fa0a2f",a,!1,{})},75983:(t,e,s)=>{var a=s(57500);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals),(0,s(70534).A)("02f50890",a,!1,{})},6225:(t,e,s)=>{var a=s(61724);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals),(0,s(70534).A)("43aeb844",a,!1,{})},45192:(t,e,s)=>{var a=s(32415);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals),(0,s(70534).A)("d6e7e6ae",a,!1,{})},71098:(t,e,s)=>{var a=s(97823);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals),(0,s(70534).A)("a5c8bfe0",a,!1,{})},98393:(t,e,s)=>{var a=s(54938);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals),(0,s(70534).A)("b3acbb32",a,!1,{})},62319:(t,e,s)=>{"use strict";s.d(e,{A:()=>c});var a=s(33277),r=s(80444),n=s(89843),i=s(18221),l=s(21777),o=s(69159);class c{static isWebauthnPasswordAvailable(){return!!window.PasswordCredential}async run(t=null){if(c.isWebauthnPasswordAvailable()){null===t&&(t=(await this._showSetupDialog()).password);try{await this._storeEncryptionPassphrase(t),n.A.set("client.encryption.webauthn.enabled",!0),i.A.success("WebauthnLoginSetupSuccess")}catch(t){o.A.error(t)}}}async _storeEncryptionPassphrase(t){let e=r.A.translate("Passwords App Encryption Passphrase"),s=`${(0,l.HW)().uid}.passwordsapp@${location.host}`,a=n.A.get("server.theme.app.icon");const i=new PasswordCredential({id:s,password:t,name:e,iconURL:a});await navigator.credentials.store(i)}_showSetupDialog(){return a.A.form({password:{label:"WebauthnEncryptionPassphrase",type:"password",button:"toggle",minlength:12,required:!0,validator:(t,e)=>t!==e.oldPassword&&t.length>=12},repeatPassword:{label:"WebauthnEncryptionPassphraseRepeat",type:"password",button:"toggle",required:!0,validator:(t,e)=>t===e.password}},"WebauthnEncryptionSetupTitle","WebauthnEncryptionPassphraseText")}}},98498:(t,e,s)=>{"use strict";s.d(e,{A:()=>v});var a=s(56423),r=s(5460),n=s(41603),i=s(34413),l=s(90512),o=s(33277),c=s(69159),u=s(89843),d=s(80444),p=s(32981),h=s(61338),g=s(62319);const v=new class{constructor(){this._statusFunc=null,this.status=null}async install(t,e=!1,s=!1,a=null){if(await this.isPassphraseSecure(t)){if(this._resetStatus(a),await this._updateKeychain(t),!1!==s){let t={},e={};await Promise.all([this._encryptTags(t),this._encryptFolders(e)]),await this._encryptPasswords(e,t),await this._cleanDatabase(t,e)}e&&await this._saveMasterPassword(t),r.A.loginRequired=!0,(0,h.Ic)("passwords:encryption:installed",{})}}async update(t,e){try{if(!await this.isPassphraseSecure(t))return;await a.A.setAccountChallenge(t,e),await this._updateWebAuthn(t)}catch(t){throw t}}async updateGui(){let t;try{t=await o.A.form({password:{label:"New password",type:"password",button:"toggle",minlength:12,required:!0,title:"Your password must be longer than 12 characters and not the old password",validator:(t,e)=>t!==e.oldPassword&&t.length>=12},repeatPassword:{label:"Repeat password",type:"password",button:"toggle",required:!0,title:"Please confirm your new password",validator:(t,e)=>t===e.password},oldPassword:{label:"Old password",type:"password",button:"toggle",title:"You must enter your old password",required:!0,validator:t=>t.length>=12}},"Change Password","You can use this dialog to change your master password.")}catch(t){return!1}try{l.A.lockApp(),await this.update(t.password,t.oldPassword),l.A.unlockApp(),o.A.alert("Your password has been changed successfully.","Password changed")}catch(t){return l.A.unlockApp(),c.A.error(t),o.A.alert(t.message,"Changing password failed"),!1}return!0}async isPassphraseSecure(t){let e=!0;if(t.length<12)e=!1;else{let s=await i.A.getClient().getInstance("service.hash"),a=await s.getHash(t);e=-1===(await s.getBreachedHashes(a.substring(0,5))).indexOf(a)}return e||o.A.alert("CSENewPassphraseInsecureText","CSEPassphraseInsecureTitle").catch(c.A.catch),e}async _updateKeychain(t){this._sendStatus("keychain","processing",1);try{await a.A.setAccountChallenge(t),await Promise.all([await u.A.reset("user.encryption.cse"),await u.A.reset("user.encryption.sse")]),this._sendStatus("keychain","done")}catch(t){throw this._sendStatus("keychain","error",t),t}}async _encryptPasswords(t,e){this._sendStatus("passwords","loading");let s=await a.A.listPasswords("model+tags"),r=[];this._sendStatus("passwords","processing",Object.keys(s).length);for(let a in s){if(!s.hasOwnProperty(a))continue;let n=s[a];r.push(this._encryptPassword(n,t,e))}0!==r.length&&await Promise.all(r),this._sendStatus("passwords","done")}async _encryptPassword(t,e,s,r,n){t.folder=e[t.folder];let i=[];for(let e in t.tags)t.tags.hasOwnProperty(e)&&i.push(s[e]);if(t.tags=i,t.shared||null!==t.share)try{await a.A.updatePassword(t),c.A.success(`Updated password ${t.id}`),this._sendStatus("passwords")}catch(t){throw this._sendStatus("passwords","error",t),t}else{await this._deleteObject(t.id,"password"),t.cseType="CSEv1r1";try{await a.A.createPassword(t),c.A.success(`Encrypted password ${t.id}`),this._sendStatus("passwords")}catch(t){throw this._sendStatus("passwords","error",t),t}}}async _encryptTags(t){this._sendStatus("tags","loading");let e=await a.A.listTags(),s=[];this._sendStatus("tags","processing",Object.keys(e).length);for(let a in e)e.hasOwnProperty(a)&&(s.push(this._encryptTag(e[a],t)),s.length>10&&(await Promise.all(s),s=[]));return 0!==s.length&&await Promise.all(s),this._sendStatus("tags","done"),t}async _encryptTag(t,e){try{t.cseType="CSEv1r1";let s=await a.A.createTag(t);e[t.id]=s.id,this._sendStatus("tags"),c.A.success(`Encrypted tag ${t.id}`)}catch(t){throw this._sendStatus("tags","error",t),t}}async _encryptFolders(t){this._sendStatus("folders","loading");let e=await a.A.listFolders(),s=[];t["00000000-0000-0000-0000-000000000000"]="00000000-0000-0000-0000-000000000000",e=this._sortFoldersForUpgrade(e),this._sendStatus("folders","processing",Object.keys(e).length);for(let a of e)"00000000-0000-0000-0000-000000000000"!==a.id&&((!t.hasOwnProperty(a.parent)||s.length>10)&&(await Promise.all(s),s=[]),s.push(this._encryptFolder(a,t)));return await Promise.all(s),this._sendStatus("folders","done"),t}async _encryptFolder(t,e){try{t.parent=e[t.parent],t.cseType="CSEv1r1";let s=await a.A.createFolder(t);e[t.id]=s.id,this._sendStatus("folders"),c.A.success(`Encrypted folder ${t.id}`)}catch(t){throw this._sendStatus("folders","error",t),t}}_sortFoldersForUpgrade(t){let e=[],s=["00000000-0000-0000-0000-000000000000"];for(t=l.A.objectToArray(t);0!==t.length;)for(let a=0;a<t.length;a++){let r=t[a];-1!==s.indexOf(r.parent)&&(s.push(r.id),e.push(r),t.splice(a,1),a--)}return e}async _cleanDatabase(t,e){let s=Object.keys(t).length+Object.keys(e).length;this._sendStatus("cleanup","processing",s),n.A.ignoreApiErrors=!0,await Promise.all([this._deleteObjects(t,"tag"),this._deleteObjects(e,"folder")]),n.A.ignoreApiErrors=!1,this._sendStatus("cleanup","done")}async _deleteObjects(t,e){let s=[];for(let a in t)t.hasOwnProperty(a)&&"00000000-0000-0000-0000-000000000000"!==a&&(s.push(this._deleteObject(a,e)),s.length>10&&(await Promise.all(s),s=[]));0!==s.length&&await Promise.all(s)}async _deleteObject(t,e){let s="delete"+e.capitalize();try{await a.A[s](t),await a.A[s](t)}catch(t){t.hasOwnProperty("id")&&404===t.id||this._sendStatus("cleanup","error",t)}"password"!==e&&this._sendStatus("cleanup","processing")}async _saveMasterPassword(t){this._sendStatus("password","processing",1);let e=(0,p.C)("passwords","api-user",null),s=d.A.translate("Passwords App Encryption Passphrase"),r=d.A.translate("This is a copy of the passphrase you chose for encryption. Changing or deleting this entry does not affect the encryption. The passphrase can only be changed in the settings. More information can be found in the handbook."),n=location.href;try{await a.A.createPassword({username:e,password:t,label:s,url:n,notes:r}),this._sendStatus("password","done")}catch(t){this._sendStatus("password","error",t)}}_resetStatus(t){this._statusFunc=t,this.status={passwords:{status:"waiting",total:0,current:0,errors:[]},keychain:{status:"waiting",total:0,current:0,errors:[]},folders:{status:"waiting",total:0,current:0,errors:[]},cleanup:{status:"waiting",total:0,current:0,errors:[]},tags:{status:"waiting",total:0,current:0,errors:[]},save:{status:"waiting",total:0,current:0,errors:[]}}}_sendStatus(t,e="processing",s=null){if(null===this._statusFunc||!this.status.hasOwnProperty(t))return;let a=this.status[t];"processing"===e?(a.status="processing",null!==s?(a.total=s,a.current=0):a.current++):"loading"===e?a.status="loading":"done"===e?(a.status=0===a.errors.length?"success":"failed","success"===a.status&&(a.current=a.total)):"error"===e&&(c.A.error(s),a.errors.push(s),"cleanup"!==t&&(a.status="failed")),this._statusFunc(this.status)}async _updateWebAuthn(t){if(u.A.get("client.encryption.webauthn.enabled"))try{await g.A.run(t)}catch(t){c.A.error(t)}}}},21777:(t,e,s)=>{"use strict";s.d(e,{HW:()=>u,do:()=>i,zo:()=>l});var a=s(61338);let r;const n=[];function i(){if(void 0===r){const t=document?.getElementsByTagName("head")[0];r=t?t.getAttribute("data-requesttoken"):null}return r}function l(t){n.push(t)}let o;(0,a.B1)("csrf-token-update",(t=>{r=t.token,n.forEach((t=>{try{t(r)}catch(t){console.error("error updating CSRF token observer",t)}}))}));const c=(t,e)=>t?t.getAttribute(e):null;function u(){if(void 0!==o)return o;const t=document?.getElementsByTagName("head")[0];if(!t)return null;const e=c(t,"data-user");return null===e?(o=null,o):(o={uid:e,displayName:c(t,"data-user-displayname"),isAdmin:!!window._oc_isadmin},o)}}}]);