/*! For license information please see CreatePassword.179a2d341daf486089ae.js.LICENSE.txt */
(self.webpackChunkncpasswords=self.webpackChunkncpasswords||[]).push([[7376],{97479:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={}},37784:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={}},65162:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={}},99523:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={}},86108:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={}},57761:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={}},58032:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={}},59666:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={}},77878:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={}},50710:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={}},15225:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={}},98277:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={}},96634:(e,t,s)=>{"use strict";s.d(t,{A:()=>p});var a=function(){var e=this,t=e._self._c;return t("nc-select",{staticClass:"passwords-tags-field",class:{"no-wrap":e.noWrap},attrs:{"no-wrap":e.noWrap,multiple:!0,taggable:!0,closeOnSelect:!1,options:e.options,loading:e.loading,placeholder:e.t("Add Tags..."),"aria-label-combobox":e.t("Tags")},on:{"option:created":function(t){return e.createTag(t)}},scopedSlots:e._u([{key:"selected-option-container",fn:function({option:s,deselect:a,multiple:l,disabled:o}){return[t("div",{staticClass:"vs__selected",class:e.tagCssClass(s),style:{backgroundColor:s.color},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),a(s)},mousedown:function(e){e.preventDefault(),e.stopPropagation()}}},[e._v("\n            "+e._s(s.label)+"\n        ")])]}},{key:"option",fn:function({label:s,color:a}){return[t("div",{staticClass:"passwords-tag-option"},[t("tag-icon",{attrs:{"fill-color":a}}),e._v("\n            "+e._s(s)+"\n        ")],1)]}}]),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})};a._withStripped=!0;var l=s(53024),o=s(67607),r=s(56423),i=s(48163),n=s(17638),d=s(43454),u=s(90512);const c={components:{TagIcon:d.A,Translate:l.A,NcSelect:o.A},props:{noWrap:{type:Boolean,default:!1},value:{type:[Array,Object],default:()=>[]}},data:()=>({tags:{},model:[],loading:!0,timeout:null}),computed:{tagIdsInValue(){let e;if(this.isPassword){if(!this.value.hasOwnProperty("tags"))return[];e=Array.isArray(this.value.tags)?this.value.tags:Object.keys(this.value.tags)}else e=Array.isArray(this.value)?this.value:Object.keys(this.value);return e},isPassword(){return this.value.hasOwnProperty("type")&&"password"===this.value.type},options(){let e=[],t=u.A.arrayPluck(this.model,"id");for(let s in this.tags)this.tags.hasOwnProperty(s)&&-1===t.indexOf(s)&&e.push(this.tags[s]);return u.A.sortApiObjectArray(e,"label")}},mounted(){this.loadTags()},methods:{loadTags(){r.A.listTags().then((e=>{this.tags=e,this.loading=!1,this.$nextTick((()=>{this.handleValueUpdate()}))}))},handleValueUpdate(){if(this.loading)return;let e=[];for(let t of this.tagIdsInValue)e.push(this.tags[t]);JSON.stringify(e)!==JSON.stringify(this.model)&&this.model.splice(0,this.model.length,...e)},createTag(e){"string"==typeof e&&(e={label:e}),i.A.createTagFromData(e).then((e=>{this.tags[e.id]=e;for(let t=0;t<this.model.length;t++)(!this.model[t].hasOwnProperty("id")&&this.model[t].label===e.label||this.model[t]===e.label)&&this.model.splice(t,1,e)}))},tagCssClass:e=>e.color?u.A.getColorLuma(e.color)<96?"is-dark":"is-bright":"is-dark",handleModelUpdate(e){if(this.loading)return;let t=u.A.arrayPluck(e,"id");if(JSON.stringify(this.tagIdsInValue)!==JSON.stringify(t)){let e={};for(let s of t)e[s]=this.tags[s];this.isPassword?(this.value.tags=e,this.updatePassword()):this.$emit("input",e)}},updatePassword(){null!==this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{let e=u.A.cloneObject(this.value);0===Object.keys(e.tags).length&&(e.tags=[""]),n.A.updatePassword(e).finally((()=>{this.timeout=null}))}),1e3)}},watch:{value:{deep:!0,handler(){this.handleValueUpdate()}},model(e){this.handleModelUpdate(e)}}};s(60331);const p=(0,s(14486).A)(c,a,[],!1,null,null,null).exports},29836:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Se});var a=function(){var e=this,t=e._self._c;return t("nc-modal",{attrs:{id:"passwords-edit-dialog",container:e.container,size:"large"},on:{drop:function(t){return t.stopPropagation(),t.preventDefault(),e.dragDrop.apply(null,arguments)},close:e.closeWindow}},[t("div",{staticClass:"header"},[t("translate",{attrs:{tag:"h1",say:e.title}}),e._v(" "),t("favorite-field",{model:{value:e.password.favorite,callback:function(t){e.$set(e.password,"favorite",t)},expression:"password.favorite"}})],1),e._v(" "),t("div",{staticClass:"content"},[t("form",{ref:"form",staticClass:"password-form",attrs:{id:"password-edit-form"},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),(!1).apply(null,arguments))},function(t){return(t.type.indexOf("key")||83===t.keyCode)&&t.ctrlKey?(t.preventDefault(),t.stopPropagation(),e.submitAction()):null}],submit:function(t){return t.preventDefault(),e.submitAction()}}},[t("div",{staticClass:"password-form-fields"},[t("password-field",{attrs:{autofocus:!0},model:{value:e.password.password,callback:function(t){e.$set(e.password,"password",t)},expression:"password.password"}}),e._v(" "),t("text-field",{attrs:{id:"username",label:"Username",icon:"user",maxlength:"64"},model:{value:e.password.username,callback:function(t){e.$set(e.password,"username",t)},expression:"password.username"}}),e._v(" "),t("text-field",{attrs:{id:"label",label:"Name",icon:"book",maxlength:"64"},model:{value:e.password.label,callback:function(t){e.$set(e.password,"label",t)},expression:"password.label"}}),e._v(" "),t("url-field",{attrs:{id:"url",label:"Website",icon:"globe",maxlength:"2048"},model:{value:e.password.url,callback:function(t){e.$set(e.password,"url",t)},expression:"password.url"}}),e._v(" "),t("folder-field",{on:{folder:e.updateFolder},model:{value:e.password.folder,callback:function(t){e.$set(e.password,"folder",t)},expression:"password.folder"}}),e._v(" "),t("tags-field",{model:{value:e.password.tags,callback:function(t){e.$set(e.password,"tags",t)},expression:"password.tags"}}),e._v(" "),e.showHidden?t("checkbox-field",{attrs:{id:"hidden",label:"Hidden password","checkbox-label":"Don't show this password anywhere",icon:"eye-slash"},model:{value:e.password.hidden,callback:function(t){e.$set(e.password,"hidden",t)},expression:"password.hidden"}}):e._e(),e._v(" "),e._l(e.password.customFields,(function(s,a){return t("custom-field",{key:a,on:{delete:function(t){return e.removeCustomField(a)}},model:{value:e.password.customFields[a],callback:function(t){e.$set(e.password.customFields,a,t)},expression:"password.customFields[i]"}})})),e._v(" "),e.canAddField?t("new-custom-field",{on:{create:e.addCustomField}}):e._e()],2),e._v(" "),t("notes-field",{model:{value:e.password.notes,callback:function(t){e.$set(e.password,"notes",t)},expression:"password.notes"}}),e._v(" "),t("encryption-options",{staticClass:"encryption-options",attrs:{password:e.password}})],1)]),e._v(" "),t("div",{staticClass:"buttons"},[t("div",{staticClass:"advanced-options"},[t("encryption-options",{attrs:{password:e.password}})],1),e._v(" "),t("nc-button",{staticClass:"password-form-favorite btn-save",attrs:{type:"primary",form:"password-edit-form",nativeType:"submit",wide:!0}},[e._v("\n            "+e._s(e.t("Save"))+"\n        ")])],1)])};a._withStripped=!0;var l=s(13441),o=s(56423),r=s(53024),i=s(89843),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"password-form-field-wrapper"},[t("translate",{staticClass:"area-label",attrs:{tag:"label",for:"password-password",say:"Password",icon:"key"}}),e._v(" "),t("password-controls",{staticClass:"area-options",on:{generate:e.generatedPassword},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}}),e._v(" "),"checkbox"==(e.visible?"text":"password")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],ref:"input",staticClass:"area-input",attrs:{id:"password-password",pattern:".{1,256}",autocomplete:"new-password",readonly:e.readonly,required:"",type:"checkbox"},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e.model},on:{change:function(t){var s=e.model,a=t.target,l=!!a.checked;if(Array.isArray(s)){var o=e._i(s,null);a.checked?o<0&&(e.model=s.concat([null])):o>-1&&(e.model=s.slice(0,o).concat(s.slice(o+1)))}else e.model=l}}}):"radio"==(e.visible?"text":"password")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],ref:"input",staticClass:"area-input",attrs:{id:"password-password",pattern:".{1,256}",autocomplete:"new-password",readonly:e.readonly,required:"",type:"radio"},domProps:{checked:e._q(e.model,null)},on:{change:function(t){e.model=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],ref:"input",staticClass:"area-input",attrs:{id:"password-password",pattern:".{1,256}",autocomplete:"new-password",readonly:e.readonly,required:"",type:e.visible?"text":"password"},domProps:{value:e.model},on:{input:function(t){t.target.composing||(e.model=t.target.value)}}})],1)};n._withStripped=!0;var d=function(){return this._self._c,this._m(0)};d._withStripped=!0;const u={props:{value:[String,Number,Boolean]},data(){return{model:this.value}},watch:{value(e){this.model=e},model(e){this.value!==e&&this.$emit("input",e)}}};s(51468);var c=s(14486);const p=(0,c.A)(u,d,[function(){var e=this,t=e._self._c;return t("div",{staticClass:"password-form-field-wrapper"},[t("div",{staticClass:"area-label"}),e._v(" "),t("div",{staticClass:"area-options"}),e._v(" "),t("div",{staticClass:"area-input"})])}],!1,null,null,null).exports;var m=function(){var e=this,t=e._self._c;return t("div",{staticClass:"passwords-password-controls"},[t("icon",{attrs:{icon:e.value?"eye":"eye-slash",title:"Toggle visibility"},on:{click:function(t){return e.$emit("input",!e.value)}}}),e._v(" "),t("icon",{attrs:{icon:"refresh",spin:e.generating,title:"Generate password"},on:{click:e.generatePassword}}),e._v(" "),t("dropdown-menu",[t("ul",{attrs:{slot:"items"},slot:"items"},[t("li",{class:{active:e.numbers}},[t("translate",{attrs:{icon:e.numbers?"check-square":"square-o",say:"Numbers"},on:{click:function(t){e.numbers=!e.numbers}}})],1),e._v(" "),t("li",{class:{active:e.special}},[t("translate",{attrs:{icon:e.special?"check-square":"square-o",say:"Special Characters"},on:{click:function(t){e.special=!e.special}}})],1),e._v(" "),t("li",[t("translate",{attrs:{for:e.id,tag:"label",say:"Strength"}}),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model.number",value:e.strength,expression:"strength",modifiers:{number:!0}}],attrs:{id:e.id},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var s="_value"in t?t._value:t.value;return e._n(s)}));e.strength=t.target.multiple?s:s[0]}}},[t("translate",{attrs:{tag:"option",value:"0",say:"Low"}}),e._v(" "),t("translate",{attrs:{tag:"option",value:"1",say:"Default"}}),e._v(" "),t("translate",{attrs:{tag:"option",value:"2",say:"Medium"}}),e._v(" "),t("translate",{attrs:{tag:"option",value:"3",say:"High"}}),e._v(" "),t("translate",{attrs:{tag:"option",value:"4",say:"Ultra"}})],1)],1)])])],1)};m._withStripped=!0;var h=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dropdown-menu",attrs:{id:e.id}},[t("icon",{staticClass:"menu-toggle",attrs:{icon:"ellipsis-h"},on:{click:function(t){e.open=!e.open}}}),e._v(" "),t("div",{staticClass:"popovermenu bubble menu",class:{open:e.open}},[e._t("items")],2)],1)};h._withStripped=!0;const v={components:{Icon:l.A},data(){return{open:!1,id:`pw-dropdown-menu-${Math.round(1e4*Math.random())}`,event:e=>{null===e.target.closest(`#${this.id}`)&&(this.open=!1)}}},watch:{open(e){e?document.addEventListener("click",this.event,{passive:!0}):document.removeEventListener("click",this.event)}}};s(50276);const f=(0,c.A)(v,h,[],!1,null,null,null).exports,g={components:{Translate:r.A,Icon:l.A,DropdownMenu:f},props:{value:Boolean},data:()=>({generating:!1,numbers:i.A.get("user.password.generator.numbers",!1),special:i.A.get("user.password.generator.special",!1),strength:i.A.get("user.password.generator.strength",1),id:`pw-generator-strength-${Math.round(1e4*Math.random())}`}),methods:{generatePassword(){this.generating=!0,o.A.generatePassword(this.strength,this.numbers,this.special).then((e=>{e.strength===this.strength&&e.numbers===this.numbers&&e.special===this.special&&(this.$emit("generate",e.password),this.generating=!1)})).catch((()=>{this.generating=!1}))}},watch:{numbers(){this.generatePassword()},special(){this.generatePassword()},strength(){this.generatePassword()}}};s(31564);const w=(0,c.A)(g,m,[],!1,null,null,null).exports,b={components:{PasswordControls:w,Translate:r.A},extends:p,props:{value:[String,Number,Boolean],autofocus:Boolean},data:()=>({visible:!1,readonly:!0}),mounted(){this.$nextTick((()=>{this.readonly=!1,this.autofocus&&this.$refs.input.focus()}))},methods:{generatedPassword(e){this.model=e,this.visible=!0}}},y=(0,c.A)(b,n,[],!1,null,null,null).exports;var _=function(){var e=this,t=e._self._c;return t("div",{staticClass:"password-form-field-wrapper"},[t("translate",{staticClass:"area-label",attrs:{tag:"label",for:e.getId,say:e.label,icon:e.icon}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"area-input",attrs:{id:e.getId,type:"text",maxlength:e.maxlength,autocomplete:e.autocomplete},domProps:{value:e.model},on:{input:function(t){t.target.composing||(e.model=t.target.value)}}})],1)};_._withStripped=!0;const x={components:{Icon:l.A,Translate:r.A},extends:p,props:{id:String,label:String,icon:String,maxlength:[String,Number],autocomplete:{type:String,default:null}},computed:{getId(){return`password-${this.id}`}}},A=(0,c.A)(x,_,[],!1,null,null,null).exports;var k=function(){var e=this,t=e._self._c;return t("div",{staticClass:"password-form-notes-wrapper"},[t("translate",{staticClass:"notes-label",attrs:{tag:"h3",say:"Notes",icon:"sticky-note"}}),e._v(" "),t("translate",{ref:"label",staticClass:"notes-label",attrs:{tag:"h3",say:"Notes",icon:"sticky-note"}}),e._v(" "),t("div",{ref:"textarea",attrs:{id:"password-notes"}}),e._v(" "),t("div",{staticClass:"notes-status",class:{warning:e.isOverMaxlength}},[e._v(e._s(e.statusText))])],1)};k._withStripped=!0;var C=s(1172),F=s(33277),S=s(90512),T=s(80444);const P=4096,$={extends:p,components:{Icon:l.A,Translate:r.A},data:()=>({maxlength:P,editor:null}),computed:{statusText(){return this.isOverMaxlength?T.A.translate("You have reached the maximum length of 4096 characters"):`${this.model.length}/4096`},isOverMaxlength(){return this.model.length>=P}},mounted(){this.loadEditor()},methods:{getHelpButton(){const e=document.createElement("button");return e.style.backgroundImage="none",e.style.margin="0",e.innerHTML=" ",e.className="toastui-editor-toolbar-icons last fa fa-question-circle",e.addEventListener("click",(()=>{let e=S.A.generateUrl("/apps/passwords/#/help/Passwords%2FMarkdown-Notes");S.A.openLink(e)})),e},async loadEditor(){try{this.editor=new C.Ay({el:this.$refs.textarea,autofocus:!1,height:"100%",initialValue:this.model,previewStyle:window.innerWidth<=640?"tab":"vertical",usageStatistics:!1,language:T.A.locale,placeholder:T.A.translate("Take some notes"),hideModeSwitch:!0,toolbarItems:[[{el:this.$refs.label.$el},"heading","bold","italic","strike"],["hr","quote"],["ul","ol","indent","outdent"],["table","link"],["code","codeblock"],[{name:"undo",command:"undo",className:"toastui-editor-toolbar-icons fa fa-undo",tooltip:T.A.translate("Undo")},{name:"redo",command:"redo",className:"toastui-editor-toolbar-icons fa fa-repeat",tooltip:T.A.translate("Redo")},{el:this.getHelpButton(),command:"",tooltip:T.A.translate("Open Markdown Guide")}]],events:{change:()=>{let e=this.editor.getMarkdown();e.length>P&&(e=e.substring(0,P),this.editor.setMarkdown(e,!0),this.editor.blur()),this.model=e}}})}catch(e){console.error(e),F.A.alert(["Unable to load {module}",{module:"ToastUI Editor"}],"Network error")}}},watch:{value(e){this.model!==e&&this.editor&&this.editor.setMarkdown(e,!0)}}};s(93716);const N=(0,c.A)($,k,[],!1,null,null,null).exports;var O=function(){var e=this,t=e._self._c;return e.hasEncryption?t("div",{staticClass:"password-form-encryption-wrapper"},[t("translate",{attrs:{tag:"label",for:"password-cse",say:"Encryption"}}),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model.number",value:e.password.cseType,expression:"password.cseType",modifiers:{number:!0}}],attrs:{id:"password-cse",name:"cseType",title:e.t("Choose the encryption type for this password")},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var s="_value"in t?t._value:t.value;return e._n(s)}));e.$set(e.password,"cseType",t.target.multiple?s:s[0])}}},[t("translate",{attrs:{tag:"option",value:"none",say:"On the server"}}),e._v(" "),t("translate",{attrs:{tag:"option",value:"CSEv1r1",say:"Libsodium"}})],1)],1):e._e()};O._withStripped=!0;const I={components:{Translate:r.A},props:{password:Object},data:()=>({hasEncryption:o.A.hasEncryption})},M=(0,c.A)(I,O,[],!1,null,null,null).exports;var E=function(){var e=this,t=e._self._c;return t("nc-button",{staticClass:"password-form-favorite",attrs:{title:e.t(e.title),"aria-label":e.t(e.title),type:"tertiary"},on:{click:function(t){e.model=!e.model}}},[e.model?t("star-icon",{staticClass:"favorite",attrs:{slot:"icon","data-item-action":"favorite","fill-color":"var(--color-warning)"},slot:"icon"}):t("star-outline-icon",{staticClass:"favorite",attrs:{slot:"icon","data-item-action":"favorite","fill-color":"var(--color-warning)"},slot:"icon"})],1)};E._withStripped=!0;var q=s(74095),D=s(85361);const V={extends:p,components:{StarOutlineIcon:s(21304).A,StarIcon:D.A,NcButton:q.default},props:{value:Boolean},computed:{title(){return this.model?"Remove from favorites":"Mark as favorite"}}};s(36553);const j=(0,c.A)(V,E,[],!1,null,null,null).exports;var L=function(){var e=this,t=e._self._c;return t("div",{staticClass:"password-form-field-wrapper password-form-add-field"},[t("translate",{staticClass:"area-label",attrs:{tag:"label",for:e.getId,say:"New field",icon:"plus"}}),e._v(" "),t("div",{staticClass:"area-input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.label,expression:"label"}],attrs:{type:"text",placeholder:e.t("Name"),id:e.getId,maxlength:"48"},domProps:{value:e.label},on:{input:function(t){t.target.composing||(e.label=t.target.value)}}}),e._v(" "),t("custom-field-type",{attrs:{empty:!0,disabled:!e.hasLabel},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1)],1)};L._withStripped=!0;var U=function(){var e=this,t=e._self._c;return t("select",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.model=t.target.multiple?s:s[0]}}},[e.empty?t("translate",{attrs:{tag:"option",value:"",say:"Type",selected:""}}):e._e(),e._v(" "),t("translate",{attrs:{tag:"option",value:"text",say:"Text"}}),e._v(" "),t("translate",{attrs:{tag:"option",value:"secret",say:"Secret"}}),e._v(" "),t("translate",{attrs:{tag:"option",value:"email",say:"Email"}}),e._v(" "),t("translate",{attrs:{tag:"option",value:"url",say:"Website"}}),e._v(" "),t("translate",{attrs:{tag:"option",value:"file",say:"File"}}),e._v(" "),e.showData?t("translate",{attrs:{tag:"option",value:"data",say:"Data"}}):e._e()],1)};U._withStripped=!0;const B={components:{Translate:r.A},props:{value:String,empty:{type:Boolean,default:!1}},data(){return{model:this.value,showData:i.A.get("client.ui.custom.fields.show.hidden",!1)}},watch:{value(e){this.model=e},model(e){this.value!==e&&this.$emit("input",e)}}},H=(0,c.A)(B,U,[],!1,null,null,null).exports,W={components:{CustomFieldType:H,Translate:r.A},extends:p,data:()=>({label:"",type:""}),computed:{getId:()=>"password-add-field",hasLabel(){return this.label.length>0}},watch:{type(e){""!==e&&(this.$emit("create",{label:this.label,type:e,value:""}),this.$nextTick((()=>{this.label="",this.type=""})))}}};s(9631);const J=(0,c.A)(W,L,[],!1,null,null,null).exports;var G=function(){var e=this,t=e._self._c;return e.isVisible?t("div",{staticClass:"password-form-field-wrapper password-form-custom-field-wrapper",class:{drag:e.drag},on:{dragenter:e.dragEnter}},[t("div",{staticClass:"area-label"},[t("icon",{attrs:{icon:e.icon,draggable:"true"},on:{mouseenter:function(t){e.hover=!0},mouseleave:function(t){e.hover=!1},dragstart:e.dragStart}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.model.label,expression:"model.label"}],staticClass:"field-label",attrs:{placeholder:e.t("Name"),maxlength:e.maxlength,required:""},domProps:{value:e.model.label},on:{input:function(t){t.target.composing||e.$set(e.model,"label",t.target.value)}}})],1),e._v(" "),t("div",{staticClass:"area-options"},[t("icon",{staticClass:"delete",attrs:{icon:"trash"},on:{click:e.deleteField}}),e._v(" "),"secret"===e.value.type?t("password-controls",{on:{generate:e.generatedPassword},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}}):e._e()],1),e._v(" "),"text"===e.value.type?t("text-custom-field",{staticClass:"area-input",attrs:{id:e.id},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}):e._e(),e._v(" "),"email"===e.value.type?t("email-custom-field",{staticClass:"area-input",attrs:{id:e.id},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}):e._e(),e._v(" "),"secret"===e.value.type?t("secret-custom-field",{staticClass:"area-input",attrs:{id:e.id,visible:e.visible},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}):e._e(),e._v(" "),"url"===e.value.type?t("url-custom-field",{staticClass:"area-input",attrs:{id:e.id},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}):e._e(),e._v(" "),"file"===e.value.type?t("file-custom-field",{staticClass:"area-input",attrs:{id:e.id},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}):e._e(),e._v(" "),"data"===e.value.type?t("data-custom-field",{staticClass:"area-input",attrs:{id:e.id},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}):e._e()],1):e._e()};G._withStripped=!0;var R=function(){var e=this,t=e._self._c;return e.isVisible?t("div",{staticClass:"password-form-custom-field"},["checkbox"===e.inputType?t("input",e._g(e._b({directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],attrs:{placeholder:e.t("Value"),id:e.id,required:"",type:"checkbox"},domProps:{checked:Array.isArray(e.data)?e._i(e.data,null)>-1:e.data},on:{change:function(t){var s=e.data,a=t.target,l=!!a.checked;if(Array.isArray(s)){var o=e._i(s,null);a.checked?o<0&&(e.data=s.concat([null])):o>-1&&(e.data=s.slice(0,o).concat(s.slice(o+1)))}else e.data=l}}},"input",e.inputAttributes,!1),e.inputEvents)):"radio"===e.inputType?t("input",e._g(e._b({directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],attrs:{placeholder:e.t("Value"),id:e.id,required:"",type:"radio"},domProps:{checked:e._q(e.data,null)},on:{change:function(t){e.data=null}}},"input",e.inputAttributes,!1),e.inputEvents)):t("input",e._g(e._b({directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],attrs:{placeholder:e.t("Value"),id:e.id,required:"",type:e.inputType},domProps:{value:e.data},on:{input:function(t){t.target.composing||(e.data=t.target.value)}}},"input",e.inputAttributes,!1),e.inputEvents)),e._v(" "),t("custom-field-type",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1):e._e()};R._withStripped=!0;const z={components:{CustomFieldType:H},props:{value:Object,id:String},data(){return{data:this.value.value,type:this.value.type}},computed:{isVisible:()=>!0,inputType:()=>"text",inputAttributes(){return{maxlength:368-this.value.label.length}},inputEvents:()=>({})},methods:{emitUpdate(){this.$emit("input",{label:this.value.label,type:this.type,value:this.data})}},watch:{value:{deep:!0,handler(e){this.data=e.value,this.type=e.type}},data(e){this.value.value!==e&&this.emitUpdate()},type(e){this.value.type!==e&&this.emitUpdate()}}};s(94037);const K=(0,c.A)(z,R,[],!1,null,null,null).exports,Y={extends:K},Q=(0,c.A)(Y,void 0,void 0,!1,null,null,null).exports,X={extends:K,computed:{inputType:()=>"email",inputAttributes(){return{maxlength:368-this.value.label.length,pattern:"^.{1,}@[^@]{1,}$"}}}},Z=(0,c.A)(X,void 0,void 0,!1,null,null,null).exports,ee={extends:K,props:{visible:Boolean},computed:{inputType(){return this.visible?"text":"password"},inputAttributes(){return{maxlength:368-this.value.label.length,autocomplete:"new-password"}}}},te=(0,c.A)(ee,void 0,void 0,!1,null,null,null).exports,se={extends:K,computed:{inputType:()=>"url",inputAttributes(){return{maxlength:368-this.value.label.length,pattern:"[\\w\\-+]+:.+"}},inputEvents(){return{blur:()=>{0===this.data.trim().length||/^[\w\-+]+:.+$/.test(this.data)||(this.data="https://"+this.data.trim())}}}}},ae=(0,c.A)(se,void 0,void 0,!1,null,null,null).exports,le={extends:K,computed:{isVisible:()=>i.A.get("client.ui.custom.fields.show.hidden",!1)}},oe=(0,c.A)(le,void 0,void 0,!1,null,null,null).exports;var re=function(){var e=this,t=e._self._c;return e.isVisible?t("div",{staticClass:"password-form-custom-field password-form-file-field"},[t("div",{staticClass:"file-field",on:{click:e.chooseFile}},["checkbox"===e.inputType?t("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],attrs:{id:e.id,required:"",type:"checkbox"},domProps:{checked:Array.isArray(e.data)?e._i(e.data,null)>-1:e.data},on:{change:function(t){var s=e.data,a=t.target,l=!!a.checked;if(Array.isArray(s)){var o=e._i(s,null);a.checked?o<0&&(e.data=s.concat([null])):o>-1&&(e.data=s.slice(0,o).concat(s.slice(o+1)))}else e.data=l}}},"input",e.inputAttributes,!1)):"radio"===e.inputType?t("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],attrs:{id:e.id,required:"",type:"radio"},domProps:{checked:e._q(e.data,null)},on:{change:function(t){e.data=null}}},"input",e.inputAttributes,!1)):t("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],attrs:{id:e.id,required:"",type:e.inputType},domProps:{value:e.data},on:{input:function(t){t.target.composing||(e.data=t.target.value)}}},"input",e.inputAttributes,!1)),e._v(" "),t("span",{staticClass:"button",style:e.style})]),e._v(" "),t("custom-field-type",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1):e._e()};re._withStripped=!0;const ie={components:{Icon:l.A},extends:K,computed:{inputType:()=>"url",inputAttributes:()=>({readonly:!0}),style:()=>({backgroundImage:`url(${i.A.get("server.theme.folder.icon")})`})},methods:{async chooseFile(){this.data=await F.A.ncFilePicker()}}};s(76195);const ne={components:{PasswordControls:w,FileCustomField:(0,c.A)(ie,re,[],!1,null,null,null).exports,DataCustomField:oe,UrlCustomField:ae,SecretCustomField:te,EmailCustomField:Z,TextCustomField:Q,Icon:l.A,Translate:r.A},extends:p,inject:["dragService"],props:{value:Object},data(){return{id:`pw-custom-field-${this.value.type}-${Math.round(1e4*Math.random())}`,visible:!1,hover:!1}},computed:{icon(){return this.hover?"bars":"text"===this.model.type?"font":"secret"===this.model.type?"lock":"email"===this.model.type?"envelope":"url"===this.model.type?"globe":"file"===this.model.type?"cloud":"data"===this.model.type?"file-archive-o":"question"},maxlength(){return 368-this.model.value.length},drag(){return this.dragService.isCurrent(this.model)},isVisible(){return"data"!==this.model.type||i.A.get("client.ui.custom.fields.show.hidden",!1)}},methods:{deleteField(){F.A.confirm(['Do you want to delete the field "{field}"?',{field:this.model.label}],"Delete field").then((e=>{e&&this.$emit("delete")}))},generatedPassword(e){this.model.value=e,this.visible=!0,this.$emit("input",this.model)},dragStart(e){this.hover=!1,this.dragService.start(e,this.model,this.$el)},dragEnter(e){this.dragService.dragenter(e,this.model)}}};s(74670);const de=(0,c.A)(ne,G,[],!1,null,null,null).exports;var ue=function(){var e=this,t=e._self._c;return t("div",{staticClass:"password-form-field-wrapper"},[t("translate",{staticClass:"area-label",attrs:{tag:"label",for:e.getId,say:e.label,icon:e.icon}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"area-input",attrs:{id:e.getId,type:"url",pattern:"[\\w\\-+]+:.+",maxlength:e.maxlength,autocomplete:e.autocomplete},domProps:{value:e.model},on:{blur:e.blur,input:function(t){t.target.composing||(e.model=t.target.value)}}})],1)};ue._withStripped=!0;const ce={extends:A,methods:{blur(){0===this.model.trim().length||/^[\w\-+]+:.+$/.test(this.model)||(this.model="https://"+this.model.trim())}}},pe=(0,c.A)(ce,ue,[],!1,null,null,null).exports;class me{constructor(e){this._field=null,this._password=e,this._mousemove=e=>{0===e.buttons&&this.end()}}setPassword(e){this._password=e}isCurrent(e){return null!==this._field&&this._field===e}start(e,t,s){e.dataTransfer.effectAllowed="all",e.dataTransfer.dropEffect="move",e.dataTransfer.setDragImage(s,32,32),e.dataTransfer.setData("text",`${t.label}: ${t.value}`),this._field=t,document.addEventListener("mousemove",this._mousemove,{passive:!0})}dragenter(e,t){this.isCurrent(t)||this._move(this._password,this._field,t)}end(){this._field=null,document.removeEventListener("mousemove",this._mousemove)}_move(e,t,s){let a=e.customFields.indexOf(t);if(-1===a)return void e.customFields.push(t);e.customFields.splice(a,1);let l=e.customFields.indexOf(s);-1!==l?(l>=a&&l++,e.customFields.splice(l,0,t)):e.customFields.push(t)}}var he=function(){var e=this,t=e._self._c;return t("div",{staticClass:"password-form-field-wrapper password-form-folder-wrapper"},[t("translate",{staticClass:"area-label",attrs:{tag:"label",for:"password-folder",say:"Folder",icon:"folder"}}),e._v(" "),t("input",{staticClass:"area-input",attrs:{id:"password-folder",type:"button",value:e.valueLabel},on:{click:e.chooseFolder}})],1)};he._withStripped=!0;var ve=s(28301);const fe={components:{Translate:r.A},extends:p,props:{value:[String,Object]},data(){let e="string"!=typeof this.value;return{isObjectValue:e,valueLabel:e?this.value.label:this.value}},mounted(){this.getFolderName().catch(console.error)},methods:{async getFolderName(){if(this.isObjectValue)return;let e=await o.A.showFolder(this.value);this.valueLabel=e.label,this.$emit("folder",e)},async chooseFolder(){let e=await ve.A.selectFolder(this.model);e&&(this.model=this.isObjectValue?e:e.id,this.valueLabel=e.label,this.$emit("folder",e))}}},ge=(0,c.A)(fe,he,[],!1,null,null,null).exports;var we=function(){var e=this,t=e._self._c;return t("div",{staticClass:"password-form-field-wrapper password-form-tags-wrapper"},[t("translate",{staticClass:"area-label",attrs:{tag:"label",for:"password-tags",say:"Tags",icon:"tags"}}),e._v(" "),t("tags",{staticClass:"area-input",attrs:{id:"password-tags",value:e.value,"no-wrap":!0},on:{input:function(t){return e.$emit("input",t)}}})],1)};we._withStripped=!0;var be=s(96634);const ye={components:{Translate:r.A,Tags:be.A},props:{value:{type:[Array,Object],default:()=>[]}}},_e=(0,c.A)(ye,we,[],!1,null,null,null).exports;var xe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"password-form-field-wrapper password-form-checkbox-wrapper"},[t("translate",{staticClass:"area-label",attrs:{tag:"label",for:e.getId,say:e.label,icon:e.icon}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],attrs:{id:e.getId,type:"checkbox"},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e.model},on:{change:function(t){var s=e.model,a=t.target,l=!!a.checked;if(Array.isArray(s)){var o=e._i(s,null);a.checked?o<0&&(e.model=s.concat([null])):o>-1&&(e.model=s.slice(0,o).concat(s.slice(o+1)))}else e.model=l}}}),e._v(" "),t("translate",{staticClass:"area-input",attrs:{tag:"label",for:e.getId,say:e.checkboxLabel,icon:e.checkboxIcon}})],1)};xe._withStripped=!0;const Ae={components:{Translate:r.A},extends:p,props:{id:String,label:String,icon:String,checkboxLabel:String},computed:{getId(){return`password-${this.id}`},checkboxIcon(){return this.model?"check-square":"square-o"}}};s(42067);const ke=(0,c.A)(Ae,xe,[],!1,null,null,null).exports;var Ce=s(94493);const Fe={components:{CheckboxField:ke,TagsField:_e,FolderField:ge,UrlField:pe,CustomField:de,NewCustomField:J,Icon:l.A,FavoriteField:j,EncryptionOptions:M,NotesField:N,TextField:A,PasswordField:y,Translate:r.A,NcModal:Ce.A,NcButton:q.default},provide(){return{dragService:this.dragService}},props:{title:{type:String,default:"Create password"},properties:{type:Object},_success:{type:Function},_fail:{type:Function,default:null}},data(){let e=1===i.A.get("user.encryption.cse")?"CSEv1r1":"none",t=Object.assign({cseType:e,notes:"",favorite:!1,customFields:[],tags:[],hidden:!1},this.properties);return{password:t,dragService:new me(t),isFolderHidden:!1,container:S.A.popupContainer(!0)}},computed:{canAddField(){return this.password.customFields.length<20},showHidden(){return this.properties&&this.properties.hidden}},methods:{addCustomField(e){this.password.customFields.push(e)},removeCustomField(e){this.password.customFields.splice(e,1)},async submitAction(){if(!this.$refs.form.checkValidity())return;let e=S.A.cloneObject(this.password);if(e=o.A.flattenPassword(e),e=o.A.validatePassword(e),(!e.hidden||this.isFolderHidden||await F.A.confirm("PwdSaveHiddenMessage","PwdSaveHiddenTitle",!0))&&this._success)try{this._success(e),this.closeWindow(!1)}catch(e){console.error(e)}},dragDrop(e){this.dragService.end(e)},updateFolder(e){this.isFolderHidden=e.hidden},closeWindow(e=!0){this.$destroy(),this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),e&&this._fail&&this._fail()}},watch:{password(e){"string"==typeof e.customFields&&(e.customFields=JSON.parse(e.customFields)),null===e.customFields&&(e.customFields=[]),this.dragService.setPassword(e)}}};s(22697);const Se=(0,c.A)(Fe,a,[],!1,null,null,null).exports},50276:(e,t,s)=>{var a=s(97479);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(70534).A)("79ed4d78",a,!1,{})},60331:(e,t,s)=>{var a=s(37784);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(70534).A)("b1966e08",a,!1,{})},22697:(e,t,s)=>{var a=s(65162);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(70534).A)("4d65cf40",a,!1,{})},51468:(e,t,s)=>{var a=s(99523);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(70534).A)("6adaf2de",a,!1,{})},42067:(e,t,s)=>{var a=s(86108);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(70534).A)("53391aa2",a,!1,{})},74670:(e,t,s)=>{var a=s(57761);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(70534).A)("76180b3b",a,!1,{})},94037:(e,t,s)=>{var a=s(58032);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(70534).A)("698da284",a,!1,{})},76195:(e,t,s)=>{var a=s(59666);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(70534).A)("0c1b5b44",a,!1,{})},36553:(e,t,s)=>{var a=s(77878);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(70534).A)("446ec3b7",a,!1,{})},9631:(e,t,s)=>{var a=s(50710);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(70534).A)("07aa9982",a,!1,{})},93716:(e,t,s)=>{var a=s(15225);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(70534).A)("3085e732",a,!1,{})},31564:(e,t,s)=>{var a=s(98277);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(70534).A)("44053c2f",a,!1,{})}}]);