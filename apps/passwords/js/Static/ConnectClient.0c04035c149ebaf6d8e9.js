(self.webpackChunkncpasswords=self.webpackChunkncpasswords||[]).push([[2870],{12520:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>n});const n={}},30622:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>n});const n={}},46529:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>n});const n={}},28762:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>n});const n={}},31212:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>n});const n={}},11544:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>n});const n={}},16091:(t,e,s)=>{"use strict";s.d(e,{A:()=>c});var n=function(){var t=this;return(0,t._self._c)("qr-code",{staticClass:"passwords-qr-code",style:t.style,attrs:{text:t.text,color:t.color,size:t.codeSize,bgColor:t.bgColor,errorLevel:"Q"}})};n._withStripped=!0;var o=s(7443),i=s(89843),a=s(90512);const r={components:{QrCode:o.A},props:{text:{type:String},size:{type:Number,default:256}},computed:{color(){let t=i.A.get("server.theme.color.primary");return a.A.getColorLuma(i.A.get("server.theme.color.background"))-a.A.getColorLuma(t)<50?"#000":t},bgColor:()=>i.A.get("server.theme.color.background"),style(){return{"border-color":this.bgColor,width:`${this.size}px`,height:`${this.size}px`}},codeSize(){return this.size-8}}};s(8131);const c=(0,s(14486).A)(r,n,[],!1,null,null,null).exports},29354:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>C});var n=function(){var t=this,e=t._self._c;return e("dialog-window",{ref:"window",attrs:{id:"passlink-connect",title:"Connect a new device","has-controls":!1}},[e("div",{staticClass:"content"},[1===t.step?e("connect-link",{attrs:{"has-link":t.hasLink,"has-code":t.hasCode,protocol:t.protocol},on:{connect:function(e){return t.connect(e)}}}):t._e(),t._v(" "),2===t.step?e("connect-confirm",{attrs:{client:t.client},on:{reject:function(e){return t.reject(e)},confirm:function(e){return t.confirm(e)}}}):t._e(),t._v(" "),3===t.step?e("connect-result",{attrs:{status:t.status},on:{restart:t.restart,close:t.close}}):t._e()],1)])};n._withStripped=!0;var o=s(53024),i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"connect-client-link"},[e("translate",{staticClass:"description",attrs:{tag:"div",say:t.description}}),t._v(" "),t.hasCode?e("qr-code",{staticClass:"qr-code",attrs:{text:t.code,size:300}}):t._e(),t._v(" "),t.hasLink?e("translate",{ref:"button",staticClass:"connect-link button primary",attrs:{tag:"a",target:"_blank",rel:"noopener noreferrer",href:t.link,say:"Connect via link"}}):t._e()],1)};i._withStripped=!0;var a=s(16091),r=s(56423);const c={components:{Translate:o.A,QrCode:a.A},props:{hasLink:Boolean,hasCode:Boolean,protocol:String},data:()=>({link:"",code:"",id:"",active:!1}),async mounted(){this.active=!0;do{await this.requestConnection()}while(this.active&&!await this.awaitResponse())},beforeDestroy(){this.active=!1},computed:{description(){return this.hasCode&&this.hasLink?"Click the button to connect an app installed on this device or scan the QR code with the app if it's installed on another device.":this.hasLink?"Click the button when you are ready to start the connection.":this.hasCode?"Just scan the QR code with the app to connect it.":void 0}},methods:{async requestConnection(){if(!this.active)return;let t=await r.A.passLinkConnectRequest();t.links.hasOwnProperty(this.protocol)?this.link=t.links[this.protocol]:this.link=t.link,this.code=t.link,this.id=t.id},async awaitResponse(){try{let t=await r.A.passLinkConnectAwait();return this.$emit("connect",t),!0}catch(t){return!1}}}};s(70064);var l=s(14486);const u=(0,l.A)(c,i,[],!1,null,null,null).exports;var d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"connect-client-confirm"},[e("translate",{staticClass:"code-info",attrs:{tag:"div",say:"Check if the codes below match with the ones provided by the device or app:"}}),t._v(" "),t._l(t.client.code,(function(s){return e("div",{staticClass:"code-container"},[e("span",{staticClass:"code"},[t._v(t._s(s))])])})),t._v(" "),e("div",{staticClass:"client-name"},[e("translate",{attrs:{tag:"label",for:"client-name",say:"Choose a name:"}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.label,expression:"label"}],attrs:{id:"client-name",maxlength:"64"},domProps:{value:t.label},on:{input:function(e){e.target.composing||(t.label=e.target.value)}}})],1),t._v(" "),e("div",{staticClass:"reject-timer"},[e("progress",{attrs:{max:"100"},domProps:{value:t.progress},on:{click:function(e){return t.reject()}}}),t._v(" "),e("translate",{attrs:{say:"The codes don't match"},on:{click:function(e){return t.reject()}}})],1),t._v(" "),e("translate",{staticClass:"primary",attrs:{tag:"button",say:"Looks good"},on:{click:function(e){return t.confirm()}}})],2)};d._withStripped=!0;const h={components:{Translate:o.A},props:{client:Object},data(){return{label:this.client.label,interval:null,progress:0}},mounted(){this.interval=setInterval((()=>{this.timer()}),1e3)},beforeDestroy(){clearInterval(this.interval)},methods:{async reject(){await r.A.passLinkConnectReject(),this.$emit("reject",{success:!1,reason:"reject",client:this.label}),clearInterval(this.interval)},async confirm(){await r.A.passLinkConnectConfirm(this.label),this.$emit("confirm",{success:!0,client:this.label}),clearInterval(this.interval)},timer(){this.progress+=100/this.client.time,this.progress>=100&&(this.$emit("reject",{success:!1,reason:"timeout",client:this.label}),clearInterval(this.interval))}}};s(85534);const p=(0,l.A)(h,d,[],!1,null,null,null).exports;var v=function(){var t=this,e=t._self._c;return e("div",{staticClass:"connect-client-result"},[e("translate",{class:t.cssClass,attrs:{tag:"div",icon:t.icon,say:t.text}}),t._v(" "),e("translate",{attrs:{tag:"button",say:t.closeText},on:{click:function(e){return t.close()}}}),t._v(" "),e("translate",{staticClass:"primary",attrs:{tag:"button",say:t.restartText},on:{click:function(e){return t.restart()}}})],1)};v._withStripped=!0;const f={components:{Translate:o.A},props:{status:Object},computed:{cssClass(){return"message"+(this.status.success?"":" error")},text(){return this.status.success?"Connection successful":"reject"===this.status.reason?"You cancelled the connection":"timeout"===this.status.reason?"You did not confirm the connection in time":void 0},icon(){return this.status.success?"check-circle":"times-circle"},closeText(){return this.status.success?"I'm done":"Don't try again"},restartText(){return this.status.success?"Connect something else":"Try again"}},methods:{async close(){this.$emit("close")},async restart(){this.$emit("restart")}}};s(32745);const m=(0,l.A)(f,v,[],!1,null,null,null).exports,_={components:{DialogWindow:s(89159).A,ConnectLink:u,ConnectConfirm:p,ConnectResult:m,Translate:o.A},props:{hasLink:Boolean,hasCode:Boolean,protocol:String},data:()=>({step:1,client:{},status:{}}),methods:{close(){this.$refs.window.closeWindow()},connect(t){this.client=t,this.step=2},reject(t){this.status=t,this.step=3},confirm(t){this.status=t,this.step=3},restart(){this.status={},this.client={},this.step=1}}};s(23683);const C=(0,l.A)(_,n,[],!1,null,null,null).exports},89159:(t,e,s)=>{"use strict";s.d(e,{A:()=>a});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pw-dialog-window background"},[e("div",{staticClass:"window"},[t.hasTitle?e("div",{staticClass:"title"},[t._t("title",(function(){return[null!==t.title?e("translate",{attrs:{say:t.title}}):t._e()]})),t._v(" "),e("div",{staticClass:"window-controls"},[t._t("window-controls"),t._v(" "),e("icon",{staticClass:"close",attrs:{icon:"close",title:"Close"},on:{click:function(e){return t.closeWindow()}}})],2)],2):t._e(),t._v(" "),e("div",{staticClass:"content"},[t._t("content"),t._v(" "),t._t("default")],2),t._v(" "),t.hasControls?e("div",{staticClass:"controls"},[t._t("controls")],2):t._e()])])};n._withStripped=!0;var o=s(13441);const i={components:{Translate:s(53024).A,Icon:o.A},props:{title:{type:String,default:null},hasTitle:{type:Boolean,default:!0},hasControls:{type:Boolean,default:!0}},mounted(){document.getElementById("content-vue").style.zIndex="2001"},destroyed(){document.getElementById("content-vue").style.zIndex="auto"},methods:{closeWindow(){this.$emit("close"),this.$destroy(),this.$el.parentNode.removeChild(this.$el)}}};s(5643);const a=(0,s(14486).A)(i,n,[],!1,null,null,null).exports},8131:(t,e,s)=>{var n=s(12520);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals),(0,s(70534).A)("4dddf3fe",n,!1,{})},23683:(t,e,s)=>{var n=s(30622);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals),(0,s(70534).A)("5f194084",n,!1,{})},85534:(t,e,s)=>{var n=s(46529);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals),(0,s(70534).A)("190693e2",n,!1,{})},70064:(t,e,s)=>{var n=s(28762);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals),(0,s(70534).A)("7dc7c53d",n,!1,{})},32745:(t,e,s)=>{var n=s(31212);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals),(0,s(70534).A)("7168e1e0",n,!1,{})},5643:(t,e,s)=>{var n=s(11544);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals),(0,s(70534).A)("979c1662",n,!1,{})}}]);